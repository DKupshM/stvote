{"version":3,"sources":["firebase.js","Components/NavBar/NavBar.js","Components/Home.js","Components/Hooks/useInterval.js","Data_Models/Candidate.js","Components/ElectionPage/Race/ProgressBar.js","Components/ElectionPage/Race/CandidatePosition.js","Components/ElectionPage/Race/CandidateList.js","Components/ElectionPage/Settings.js","Data_Models/Util.js","Components/Hooks/useWindowSize.js","Components/ElectionPage/CustomFirstPie.js","Components/ElectionPage/Models/FirstChoicePie.js","Data_Models/Round.js","Data_Models/Race.js","Components/ElectionPage/Models/ElectedCandidatesPie.js","Components/ElectionPage/Models/CandidatesRankedPie.js","Components/ElectionPage/Models/CandidatesRanked.js","Components/ElectionPage/Models/PartyPercentage.js","Components/ElectionPage/Models/EventualWinner.js","Components/ElectionPage/Models/VoteOverTime.js","Components/ElectionPage/Models/VoteOverTimeBump.js","Components/ElectionPage/Models/RoundCandidateBump.js","Data_Models/Voter.js","Data_Models/Ballot.js","Data_Models/Party.js","Components/ElectionPage/Models/Sankey.js","Components/ElectionPage/Models/HeatMap.js","Components/ElectionPage/Models/ElectionBar.js","Components/ElectionPage/Models/Chord.js","Components/ElectionPage/ElectionPage.js","Components/FourZeroFour.js","Components/AddToDatabase.js","App.js","serviceWorker.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","NavBar","props","useState","activeKey","setActiveKey","handleSelect","eventKey","Number","isInteger","Navbar","collapseOnSelect","expand","bg","variant","Brand","href","onClick","Toggle","aria-controls","Collapse","id","Nav","className","onSelect","Link","Home","CreateSelectButton","election_title","filename","years","yearButtons","map","item","index","Button","key","year","console","log","OnClick","ButtonGroup","vertical","size","style","padding","disabled","asuc","asucsb","asucd","asucsc","asucla","display","alignItems","justifyContent","flexWrap","useInterval","callback","delay","savedCallback","useRef","useEffect","current","setInterval","clearInterval","Candidate","candidate_id","candidate_name","candidate_party","candidate_color","this","CandidateState","ProgressBar","bgcolor","completed","fillerStyles","height","width","backgroundColor","borderRadius","textAlign","color","fontWeight","Math","floor","CandidatePosition","get_status_color","status","position","isNaN","seats","candidate","party_color","party_name","score","margin","quota","min","CandidateList","candidate_list","candidates","sort","x","y","scope","ElectionSettings","excused_boxes","race","inactive_candidates","check","includes","planned_active_candidates","Form","Check","label","checked","onChange","excused","running","reset_race","boxShadow","find_candidate_by_id","i","length","String","find_party_by_name","parties","name","useWindowSize","undefined","windowSize","setWindowSize","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","GroupSettings","groupNumber","number","title","random","toString","CustomGraph","totalAmount","data","top","right","bottom","left","innerRadius","padAngle","cornerRadius","colors","bar","groups","group","borderColor","from","modifiers","enableRadialLabels","sliceLabel","round","value","slicesLabelsSkipAngle","slicesLabelsTextColor","legends","text","fontSize","anchor","direction","justify","translateX","translateY","itemsSpacing","itemWidth","itemHeight","itemTextColor","itemDirection","itemOpacity","symbolSize","symbolShape","CustomFirstPie","setColor","setTitle","selectedCandidates","setSelectedCandidates","editTitle","setEditTitle","show","setShow","displayColorPicker","setDisplayColorPicker","imageRef","React","createRef","setGroups","activeGroupNumber","setActiveGroupNumber","push","handleClose","saveChanges","group_buttons","paddingLeft","paddingRight","indexOf","candidate_options","scores","first_scores","groupScore","Row","Col","md","concat","flexDirection","ref","exportComponentAsPNG","Modal","aria-labelledby","centered","onHide","Header","closeButton","Title","Body","onKeyPress","e","which","preventDefault","Label","Control","type","event","target","as","Array","selectedOptions","option","multiple","background","cursor","zIndex","onChangeComplete","hex","Footer","copy","splice","FirstChoicePie","get_ranked_choices","party","ranked_choices","ballots","choices","pixelRatio","radialLabelsSkipAngle","radialLabelsTextXOffset","radialLabelsTextColor","radialLabelsLinkOffset","radialLabelsLinkDiagonalLength","radialLabelsLinkHorizontalLength","radialLabelsLinkStrokeWidth","radialLabelsLinkColor","animate","motionStiffness","motionDamping","Round","round_number","add_ballot","ballot","state","RoundState","COMPLETE","Error","ballot_id","find_next_active_candidate","candidate_ballots","candidate_scores","active_candidates","add_candidate","elected_candidates","start_inactive_candidates","start_active_candidates","eliminated_candidates","set_elected_candidate","filter","ballotsToTransfer","set_eliminate_candidate","candidate_ballot","candidate_score","complete","isCandidateElected","candidate_real_scores","RUNNING","exhausted","rankings","Race","race_id","race_name","dropped_candidates","dropped","RaceState","ADDING","current_candidate","inactive_ballots","rounds","transfer_voters","ballots_to_apply","candidate_ballot_rankings","planned_inactive_candidates","elected","transferring","transfered","excuse_candidate","unexcuse_candidate","num_candidates","currentScores","candidateTable","start_tabulation","TABULATING","run_race_step","elect_candidate","currentRound","Object","keys","surplus","transfer_value","transfer_candidate","shift","first_round_score","activeCandidates","roundElected","maxElected","roundTransfer","reverse","complete_round","previousRound","add_round","begin_race","PartyPercentage","entries","constructor","maxChoices","num_ranked","max","scheme","CandidatesRanked","data_to_add","indexBy","innerPadding","minValue","maxValue","groupMode","layout","colorBy","borderWidth","axisTop","axisRight","axisBottom","tickSize","tickPadding","tickRotation","legend","legendPosition","legendOffset","axisLeft","enableGridX","enableGridY","enableLabel","labelSkipWidth","labelSkipHeight","labelTextColor","isInteractive","maxchoices","datapoints","xScale","yScale","stacked","orient","enablePoints","enableArea","areaOpacity","useMesh","get_first_elected","VoteOverTime","choices_over_time","score_chart","xFormat","yFormat","tickValues","lineWidth","VoteOverTimeBump","indexOfMax","arr","maxIndex","increment","candidate_positions","datapoint","getCandidateByName","activeLineWidth","inactiveLineWidth","inactiveOpacity","pointSize","activePointSize","inactivePointSize","format","RoundCandidateBump","pointColor","theme","pointBorderWidth","activePointBorderWidth","pointBorderColor","Voter","voter_id","participating_races","races","participating_in_race","get_ballot_for_race","Ballot","Party","isValidColor","s","Option","Sankey","active_candidate","prev_round","nodes","links","link","source","transfer_candidates_ballot","next_candidate","transfer_candidate_id","GenerateData","align","nodeTooltip","node","nodeOpacity","nodeThickness","nodeInnerPadding","nodeSpacing","nodeBorderWidth","nodeBorderColor","linkOpacity","linkHoverOpacity","linkHoverOthersOpacity","enableLinkGradient","enableLabels","labelPosition","labelOrientation","labelPadding","HeatMap","get_ballots_for_candidate_at_position","showPercent","xChoice","setXChoice","yChoice","setYChoice","heatData","other_candidate","sum","xButtons","Dropdown","Item","yButtons","DropdownButton","tooltipFormat","forceSquare","cellOpacity","cellBorderColor","defs","rotation","spacing","fill","hoverTarget","cellHoverOthersOpacity","ElectionBar","get_round_data","round_data","get_candidate_position","candidate_table","get_candidate_by_position","final_candidate_score","setRound","data_active_candidates","round_active_candidates","chart_data","transferred","font","step","changeEvent","max_score","get_max_score","Chord","chordData","matrix","valueFormat","innerRadiusRatio","innerRadiusOffset","arcOpacity","arcBorderWidth","arcBorderColor","ribbonOpacity","ribbonBorderWidth","ribbonBorderColor","labelOffset","labelRotation","arcHoverOpacity","arcHoverOthersOpacity","ribbonHoverOpacity","ribbonHoverOthersOpacity","effects","on","ElectionPage","shadeColor","percent","R","parseInt","substring","G","B","find_race_by_id","find_race_by_name","election_configuration","setElectionConfiguration","candidate_data","setCandidateData","party_data","setPartyData","ballot_data","setBallotData","candidates_dropped","setCandidatesDropped","isLoading","setIsLoading","partiesLoaded","setPartiesLoaded","racesLoaded","setRacesLoaded","candidatesLoaded","setCandidatesLoaded","votersLoaded","setVotersLoaded","setParties","setRaces","voters","setVoters","activeRace","setActiveRace","speed","setSpeed","refresh","setRefresh","isRunning","setIsRunning","page","setPage","model","setModel","a","parties_data","electionId","match","params","yearId","databaseString","database","once","snapshot","exists","child","val","loadData","partiesToAdd","loadParties","racesToAdd","race_position","race_max_winners","loadRaces","candidate_colors","loadCandidates","voter","uuid","candidateOrder","loadVoters","pageButtonStyle","pageButtons","raceTitle","dropdownItems","chartStyle","alignSelf","ElectedCandidatesPie","CandidatesRankedPie","EventualWinner","modelButtons","minHeight","FourZeroFour","Component","AddToDatabase","reader","FileReader","onload","JSON","parse","result","files","readAsText","electionName","setElectionName","setYear","onSubmit","checkStrings","str","alert","set","Group","placeholder","justifyItems","File","accept","NavBarWithRouter","withRouter","App","basename","exact","path","to","component","render","Boolean","location","hostname","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.aaeac02d.chunk.js","sourcesContent":["import firebase from 'firebase';\nconst config = {\n    apiKey: \"AIzaSyCFNJfMcHbdoAKVVF88d-9POsUgk-C7NKk\",\n    authDomain: \"stvote-b967b.firebaseapp.com\",\n    databaseURL: \"https://stvote-b967b.firebaseio.com\",\n    projectId: \"stvote-b967b\",\n    storageBucket: \"stvote-b967b.appspot.com\",\n    messagingSenderId: \"487837721842\",\n    appId: \"1:487837721842:web:95c0dc83a5eeb46b995c6b\"\n}\n\n// Initialize Firebase\nfirebase.initializeApp(config);\n\nexport default firebase;","import React, { useState } from 'react';\nimport Nav from 'react-bootstrap/Nav'\nimport Navbar from 'react-bootstrap/Navbar'\n\nfunction NavBar(props) {\n\n    const [activeKey, setActiveKey] = useState(1);\n\n    const handleSelect = (eventKey) => {\n        if (Number.isInteger(eventKey))\n            setActiveKey(eventKey);\n        else\n            setActiveKey(0);\n    };\n\n\n    return (\n        <Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\n            <Navbar.Brand href=\"/stvote/home\" onClick={handleSelect}>STVote</Navbar.Brand>\n            <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\n            <Navbar.Collapse id=\"responsive-navbar-nav\">\n                <Nav activeKey={activeKey} className=\"mr-auto\" onSelect={handleSelect}>\n                    <Nav.Link eventKey={1} href=\"/stvote/home\">Home</Nav.Link>\n                    <Nav.Link eventKey={1} href=\"/stvote/election\">Election</Nav.Link>\n                </Nav>\n            </Navbar.Collapse>\n        </Navbar>\n    );\n}\n\nexport default NavBar;","import React from 'react';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\nimport Button from 'react-bootstrap/Button'\n\nfunction Home(props) {\n    const OnClick = (election_title, year) => {\n\n        console.log(\"Clicked\", election_title, year);\n    }\n    const CreateSelectButton = (election_title, filename, years) => {\n        let yearButtons = years.map((item, index) => (\n            <Button key={index} href={\"/stvote/election/\" + filename + \"/\" + item} onClick={() => OnClick(election_title, item)}>{item}</Button>\n        ));\n\n        return (\n            <ButtonGroup vertical size=\"lg\" style={{ padding: '2%' }}>\n                <Button variant=\"dark\" disabled={true}>{election_title}</Button>\n                {yearButtons}\n            </ButtonGroup>\n        );\n    }\n\n    let asuc = CreateSelectButton('ASUC Berkeley', \"uc_berkeley\", [2015, 2016, 2017, 2018, 2019, 2020]);\n    let asucsb = CreateSelectButton('ASUC Santa Barbara', \"uc_santa_barbara\", [2016, 2017, 2018, 2019, 2020]);\n    let asucd = CreateSelectButton('AS UC Davis', \"uc_davis\", [2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020]);\n    let asucsc = CreateSelectButton('AS UC Santa Cruz', \"uc_berkeley\", [2018, 2019, 2020]);\n    let asucla = CreateSelectButton('AS UC Los Angeles', \"uc_berkeley\", [2018, 2019, 2020]);\n\n    return (\n        <div className=\"text-center\">\n            <h1> STVote Elections </h1>\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-evenly', flexWrap: 'wrap' }}>\n                {asuc}\n                {asucsb}\n                {asucd}\n                {asucsc}\n                {asucla}\n            </div>\n        </div >\n    );\n}\n\nexport default Home;\n","import { useEffect, useRef } from 'react';\n\nfunction useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nexport default useInterval;","\nexport class Candidate {\n    constructor(candidate_id, candidate_name, candidate_party, candidate_color = \"#FFFFFF\") {\n        this.candidate_id = candidate_id;\n        this.candidate_name = candidate_name;\n        this.candidate_party = candidate_party;\n        this.candidate_color = candidate_color;\n    }\n\n\n}\n\nexport const CandidateState = {\n    ELECTED: \"ELECTED\",\n    RUNNING: \"RUNNING\",\n    TRANSFERRING: \"TRANSFERRING\",\n    TRANSFERED: \"TRANSFERED\",\n    EXCUSED: \"EXCUSED\",\n};","import React from 'react';\n\nconst ProgressBar = (props) => {\n    const { bgcolor, completed } = props;\n\n    const containerStyles = {\n        height: '48px',\n        width: '100%',\n        backgroundColor: \"#fffbf5\",\n    }\n\n    const fillerStyles = {\n        height: '100%',\n        width: `${completed}%`,\n        backgroundColor: bgcolor,\n        borderRadius: 'inherit',\n        textAlign: 'right'\n    }\n\n    const labelStyles = {\n        padding: 5,\n        color: 'black',\n        fontWeight: 'bold'\n    }\n\n    return (\n        <div style={containerStyles}>\n            <div style={fillerStyles}>\n                <span style={labelStyles}>{`${Math.floor(completed)}%`}</span>\n            </div>\n        </div>\n    );\n};\n\nexport default ProgressBar;","import React from 'react';\nimport { CandidateState } from '../../../Data_Models/Candidate';\nimport ProgressBar from './ProgressBar';\nimport '../ElectionPage.css'\n\nfunction CandidatePosition(props) {\n    const get_status_color = () => {\n        if (props.status === CandidateState.ELECTED)\n            return \"#01A039\";\n        else if (props.status === CandidateState.RUNNING)\n            return \"#0095E0\";\n        else if (props.status === CandidateState.TRANSFERRING)\n            return \"#E07A00\";\n        else if (props.status === CandidateState.TRANSFERED)\n            return \"#FF0000\";\n        else if (props.status === CandidateState.EXCUSED)\n            return \"#D5D5D5\";\n        return \"#FFFFFF\"\n    }\n\n    const get_status_text = () => {\n        if (props.status === CandidateState.ELECTED)\n            return \"ELECTED\";\n        else if (props.status === CandidateState.RUNNING)\n            return \"RUNNING\";\n        else if (props.status === CandidateState.TRANSFERRING)\n            return \"TRANSFERRING\";\n        else if (props.status === CandidateState.TRANSFERED)\n            return \"TRANSFERED\";\n        else if (props.status === CandidateState.EXCUSED)\n            return \"EXCUSED\";\n        return \"\"\n    }\n\n    const get_position = () => {\n        if (Number.isInteger(props.position) && !Number.isNaN(props.position))\n            return props.position + 1;\n        return 0;\n    }\n\n    const get_position_color = () => {\n        if (Number.isInteger(props.position) && !Number.isNaN(props.position)) {\n            if (props.position < props.seats) {\n                if (props.status === CandidateState.ELECTED)\n                    return \"#01A039\";\n                return \"#C5FFC5\"\n            } else if (props.status === CandidateState.RUNNING)\n                return \"#FAB8B8\";\n            else if (props.status === CandidateState.EXCUSED)\n                return \"#D5D5D5\";\n            else\n                return \"#FF0000\";\n        }\n        return \"#FFFFFF\";\n    }\n\n    const get_percentage = () => {\n        if (props.quota === 0)\n            return 0;\n        return Math.min(100, (props.score / props.quota) * 100);\n    }\n\n    return (\n        <tr>\n            <td className=\"basic-row\" width=\"1\" style={{ backgroundColor: get_position_color() }}> {get_position()} </td>\n            <td className=\"basic-row\" width=\"1\" style={{ backgroundColor: \"#FFFFFF\" }}> {props.candidate.candidate_name} </td>\n            <td className=\"basic-row\" width=\"1\" style={{ backgroundColor: props.candidate.candidate_party.party_color }}> {props.candidate.candidate_party.party_name} </td >\n            <td className=\"basic-row\" width=\"150\" style={{ backgroundColor: get_status_color() }}> {get_status_text()} </td >\n            <td className=\"basic-row\" width=\"100\" style={{ backgroundColor: get_status_color() }}> {Math.floor(props.score)} </td >\n            <td style={{ padding: \"0 0 0 0\", margin: \"0 0 0 0\" }}>\n                <div style={{ display: 'inline-block', width: '100%', height: '100%' }}>\n                    <ProgressBar bgcolor={get_status_color()} completed={get_percentage()} />\n                </div>\n            </td >\n        </tr >\n    );\n}\n\nexport default CandidatePosition;\n","import React from 'react';\nimport CandidatePosition from './CandidatePosition';\nimport '../ElectionPage.css'\n\nfunction CandidateList(props) {\n\n    let sortedCandidates = props.candidates().sort((x, y) => {\n        if (x.position > y.position) {\n            return 1;\n        } else if (y.position > x.position) {\n            return -1;\n        }\n        return 0;\n    });\n\n    let candidate_list = sortedCandidates.map((item, index) => (\n        <CandidatePosition key={index} candidate={item.candidate} status={item.status}\n            score={item.score} position={item.position} quota={item.quota} seats={props.seats} />\n    ));\n\n    return (\n        <div className=\"table-responsive\">\n            <table className=\"table table-bordered\" >\n                <thead className=\"thead-dark\">\n                    <tr>\n                        <th className=\"title-row\" scope=\"col\" width=\"1\" >#</th>\n                        <th className=\"title-row\" scope=\"col\" width=\"1\" >Name</th>\n                        <th className=\"title-row\" scope=\"col\" width=\"1\" >Party</th>\n                        <th className=\"title-row\" scope=\"col\" width=\"1\">Status</th>\n                        <th className=\"title-row\" scope=\"col\" width=\"1\" > Score</th >\n                        <th className=\"title-row\" scope=\"col\">Quota Percentage</th>\n                    </tr >\n                </thead >\n                <tbody>\n                    {candidate_list}\n                </tbody>\n            </table >\n        </div >\n    );\n}\n\nexport default CandidateList;\n","import React from 'react';\n\nimport { Button, Form } from 'react-bootstrap';\n\nfunction ElectionSettings(props) {\n    const resetRace = () => {\n        props.running()\n        props.race.reset_race()\n    }\n\n    let candidates = [...props.race.candidates, ...props.race.inactive_candidates]\n\n    let excused_boxes = candidates.map((candidate, index) => {\n        const check = props.race.candidates.includes(candidate) || props.race.planned_active_candidates.includes(candidate);\n        return <Form.Check label={candidate.candidate_name} key={index} size=\"lg\" checked={check}\n            onChange={() => (props.excused(candidate))} />\n    });\n\n    return (\n        <div>\n            {excused_boxes}\n            <Button onClick={resetRace} variant=\"primary\" style={{ boxShadow: '0 0 0 1px black', borderRadius: '5px 5px 5px 5px' }}>\n                {'Reset Race'}\n            </Button>\n        </div>\n    )\n}\n\nexport default ElectionSettings;","export const find_race_by_name = (races, name) => {\n    for (let i = 0; i < races.length; i++) {\n        if (races[i].race_name === name)\n            return races[i];\n    }\n    return null;\n};\n\nexport const find_race_by_id = (races, id) => {\n    for (let i = 0; i < races.length; i++) {\n        if (String(races[i].race_id) === id)\n            return races[i];\n    }\n    return null;\n};\n\nexport const find_candidate_by_id = (candidates, candidate_id) => {\n    for (let i = 0; i < candidates.length; i++)\n        if (String(candidates[i].candidate_id) === candidate_id)\n            return candidates[i];\n    return null;\n};\n\nexport const find_candidate_by_name = (candidates, candidate_name) => {\n    for (let i = 0; i < candidates.length; i++)\n        if (String(candidates[i].candidate_name) === candidate_name)\n            return candidates[i];\n    return null;\n};\n\nexport const find_party_by_name = (parties, name) => {\n    for (let i = 0; i < parties.length; i++)\n        if (parties[i].party_name === name)\n            return parties[i];\n    return null\n};","import React, { useState, useEffect } from 'react';\n\nfunction useWindowSize() {\n    // Initialize state with undefined width/height so server and client renders match\n    // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n    const [windowSize, setWindowSize] = useState({\n        width: undefined,\n        height: undefined,\n    });\n\n    useEffect(() => {\n        // Handler to call on window resize\n        function handleResize() {\n            // Set window width/height to state\n            setWindowSize({\n                width: window.innerWidth,\n                height: window.innerHeight,\n            });\n        }\n\n        // Add event listener\n        window.addEventListener(\"resize\", handleResize);\n\n        // Call handler right away so state gets updated with initial window size\n        handleResize();\n\n        // Remove event listener on cleanup\n        return () => window.removeEventListener(\"resize\", handleResize);\n    }, []); // Empty array ensures that effect is only run on mount\n\n    return windowSize;\n}\n\nexport default useWindowSize;","import React, { useEffect, useRef, useState } from 'react';\n\n\nimport { ResponsivePieCanvas } from '@nivo/pie';\nimport { SketchPicker } from 'react-color';\nimport { exportComponentAsPNG } from 'react-component-export-image';\n\nimport { Form, Row, Col, ButtonGroup, Button, Modal } from 'react-bootstrap';\nimport { find_candidate_by_id } from '../../Data_Models/Util';\nimport useWindowSize from '../Hooks/useWindowSize';\n\nclass GroupSettings {\n    constructor(groupNumber) {\n        this.number = groupNumber\n        this.title = \"Group \" + groupNumber\n        this.candidates = []\n        this.color = \"#\" + Math.floor(Math.random() * 16777215).toString(16);\n    }\n}\n\nfunction CustomGraph(props) {\n    const getPercentage = bar => {\n        return Math.round((bar.value / props.totalAmount) * 100) + \"%\";\n    }\n\n    const getColor = (bar) => {\n        for (const group of props.groups) {\n            if (group.title === bar.id) {\n                return group.color\n            }\n        }\n        return \"#fff\"\n    }\n\n    if (props.totalAmount === 0)\n        return <div />\n\n    return (\n        <ResponsivePieCanvas\n            data={props.data}\n            margin={{ top: 40, right: 100, bottom: 40, left: 80 }}\n            innerRadius={0}\n            padAngle={0.7}\n            cornerRadius={3}\n            colors={getColor}\n            borderColor={{ from: 'color', modifiers: [['darker', 0.6]] }}\n            enableRadialLabels={false}\n            sliceLabel={getPercentage}\n            slicesLabelsSkipAngle={20}\n            slicesLabelsTextColor=\"#000000\"\n            legends={[\n                {\n                    text: {\n                        fontSize: 20,\n                        fontWeight: 900,\n                        color: \"#000000\"\n                    },\n                    anchor: 'top-right',\n                    direction: 'column',\n                    justify: false,\n                    translateX: 0,\n                    translateY: 0,\n                    itemsSpacing: 10,\n                    itemWidth: 60,\n                    itemHeight: 14,\n                    itemTextColor: '#999',\n                    itemDirection: 'left-to-right',\n                    itemOpacity: 1,\n                    symbolSize: 20,\n                    symbolShape: 'square',\n                    itemTextColor: '#000000'\n                }\n            ]}\n        />\n    );\n}\n\nfunction CustomFirstPie(props) {\n    const size = useWindowSize();\n    const [color, setColor] = useState(\"#fff\");\n    const [title, setTitle] = useState(\"Title\")\n    const [selectedCandidates, setSelectedCandidates] = useState([])\n    const [editTitle, setEditTitle] = useState(\"Title\")\n    const [show, setShow] = useState(false);\n    const [displayColorPicker, setDisplayColorPicker] = useState(false);\n\n    const imageRef = React.createRef();\n    const [groups, setGroups] = useState([]);\n    const [activeGroupNumber, setActiveGroupNumber] = useState(-1)\n\n    useEffect(() => {\n        if (groups.length === 0 || activeGroupNumber === -1)\n            return\n        setTitle(groups[activeGroupNumber].title)\n        setEditTitle(groups[activeGroupNumber].title)\n        setColor(groups[activeGroupNumber].color)\n        let candidates = []\n        for (const candidate of groups[activeGroupNumber].candidates) {\n            candidates.push(candidate.candidate_id)\n        }\n        setSelectedCandidates(candidates)\n    }, [activeGroupNumber, groups])\n\n    const changeColor = (color) => {\n        setColor(color.hex)\n    }\n\n    const handleClose = (saveChanges) => {\n        setShow(false);\n        if (saveChanges) {\n            if (groups.length === 0)\n                return\n            groups[activeGroupNumber].title = editTitle;\n            groups[activeGroupNumber].color = color;\n            let candidates = []\n            for (const candidate of selectedCandidates) {\n                candidates.push(find_candidate_by_id(props.race.candidates, candidate))\n            }\n            groups[activeGroupNumber].candidates = candidates\n        }\n    }\n\n    const handleShow = (groupNumber) => {\n        setActiveGroupNumber(groupNumber)\n        setShow(true);\n    }\n\n    const handleEditChange = (event) => {\n        setEditTitle(event.target.value)\n    }\n\n    const handleDelete = () => {\n        const index = groups.indexOf(groups[activeGroupNumber])\n        if (index > -1) {\n            let copy = [].concat(groups);\n            copy.splice(index, 1)\n            setGroups(copy)\n        }\n        setShow(false)\n        setActiveGroupNumber(-1)\n    }\n\n    const handleSelectedChange = (event) => {\n        setSelectedCandidates(Array.from(event.target.selectedOptions, option => option.value))\n    }\n\n    const handleColorPickerClicked = () => {\n        setDisplayColorPicker(!displayColorPicker);\n    }\n\n    const handleColorPickerClosed = () => setDisplayColorPicker(false);\n\n    const handleExportClicked = () => {\n        if (totalAmount > 0)\n            exportComponentAsPNG(imageRef)\n    }\n\n    const candidates = props.race.candidates\n\n    const addGroup = () => {\n        setGroups(groups.concat(new GroupSettings(groups.length)))\n    }\n\n    const onKeyPress = (e) => {\n        if (e.which === 13) {\n            e.preventDefault();\n            handleClose(true)\n        }\n    }\n\n    let group_buttons = groups.map((item, index) => (\n        <ButtonGroup key={index} style={{ paddingLeft: \"1%\", paddingRight: \"1%\" }} className=\"mb-2\">\n            <Button disabled>{item.title}</Button>\n            <Button onClick={() => (handleShow(groups.indexOf(item)))}> Edit </Button>\n        </ButtonGroup>\n    ));\n\n    let candidate_options = candidates.map((item, index) => {\n        if (groups.length === 0 || activeGroupNumber === -1)\n            return <div key={index} />\n        return <option key={index} value={item.candidate_id}>{item.candidate_name} </option>\n    });\n\n    let data = []\n\n    let totalAmount = 0;\n    const scores = props.race.first_scores[props.race.first_scores.length - 1]\n\n    for (const group of groups) {\n        let groupScore = 0;\n        for (const candidate of group.candidates) {\n            if (scores !== undefined)\n                groupScore += scores[candidate.candidate_id]\n        }\n        if (groupScore > 0) {\n            data.push({\n                \"id\": group.title,\n                \"label\": group.title,\n                \"value\": groupScore,\n                \"color\": group.color,\n            });\n\n            totalAmount += groupScore;\n        }\n    }\n\n    return (\n        <div style={props.style}>\n            <Row>\n                <Col md=\"3\">\n                    <Button style={{}} onClick={addGroup}>Add Group</Button>\n                </Col>\n                <Col style={{ flexDirection: \"row\" }}>\n                    {group_buttons}\n                </Col>\n            </Row>\n            <Row style={{ width: size.width, height: \"50vw\" }}>\n                <div style={{ width: size.width, height: \"50vw\" }} ref={imageRef}>\n                    <CustomGraph style={{ margin: '5%' }} totalAmount={totalAmount} data={data} groups={groups} />\n                </div>\n            </Row>\n            <Row style={{ display: \"flex\", justifyContent: \"flex-end\", alignItems: \"flex-end\" }}>\n                <Button style={{ margin: \"1%\" }} onClick={handleExportClicked}>\n                    Export As PNG\n                </Button>\n            </Row>\n\n            <Modal size=\"lg\"\n                aria-labelledby=\"contained-modal-title-vcenter\"\n                centered\n                show={show} onHide={handleClose}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Editing {title}</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <Form onKeyPress={onKeyPress}>\n                        <Row style={{ margin: '5%' }}>\n                            <Col>\n                                <Form.Label>Group Name</Form.Label>\n                            </Col>\n                            <Col>\n                                <Form.Control style={{\n                                    width: '32vw'\n                                }}\n                                    type=\"text\"\n                                    value={editTitle}\n                                    onChange={handleEditChange} />\n                            </Col>\n                        </Row>\n                        <Row style={{ margin: '5%' }}>\n                            <Col>\n                                <Form.Label>Candidates</Form.Label>\n                            </Col>\n                            <Col>\n                                <Form.Control as=\"select\" value={selectedCandidates}\n                                    onChange={handleSelectedChange} style={{\n                                        width: '32vw'\n                                    }} multiple>\n                                    {candidate_options}\n                                </Form.Control>\n                            </Col>\n                        </Row>\n                        <Row style={{ margin: '5%' }}>\n                            <Col>\n                                <Form.Label>Group Color</Form.Label>\n                            </Col>\n                            <Col>\n                                <div style={{\n                                    padding: '1vw',\n                                    background: '#fff',\n                                    borderRadius: '5px',\n                                    boxShadow: '0 0 0 1px rgba(0,0,0,.1)',\n                                    display: 'inline-block',\n                                    cursor: 'pointer',\n                                }}\n                                    onClick={handleColorPickerClicked}>\n                                    <div style={{\n                                        width: '30vw',\n                                        height: '2vw',\n                                        borderRadius: '2px',\n                                        backgroundColor: color,\n                                    }} />\n                                </div>\n                                {displayColorPicker ? <div style={{\n                                    position: 'absolute',\n                                    zIndex: '2',\n                                }}>\n                                    <div style={{\n                                        position: 'fixed',\n                                        top: '0px',\n                                        right: '0px',\n                                        bottom: '0px',\n                                        left: '0px',\n                                    }} onClick={handleColorPickerClosed} />\n                                    <SketchPicker color={color} onChangeComplete={changeColor} />\n                                </div> : null}\n                            </Col>\n                        </Row>\n                    </Form>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" style={{}} onClick={handleDelete}>\n                        Delete\n                    </Button>\n                    <Button variant=\"secondary\" onClick={() => handleClose(false)}>\n                        Close\n                    </Button>\n                    <Button variant=\"primary\" onClick={() => handleClose(true)}>\n                        Save Changes\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </div >\n    );\n}\n\nexport default CustomFirstPie;\n","import React from 'react';\n\nimport { ResponsivePieCanvas } from '@nivo/pie';\n\nimport { find_party_by_name } from '../../../Data_Models/Util';\n\nfunction FirstChoicePie(props) {\n\n    const get_ranked_choices = (race, party) => {\n        let ranked_choices = 0;\n        for (const ballot of race.ballots) {\n            if (ballot.candidates[0].candidate_party.party_name === party.party_name)\n                ranked_choices += 1;\n        }\n        return ranked_choices;\n    }\n\n    let choices = {};\n    for (const party of props.parties) {\n        let ranked_choices = get_ranked_choices(props.race, party);\n        if (ranked_choices > 0)\n            choices[party.party_name] = get_ranked_choices(props.race, party);\n    }\n\n    let data = [];\n    let totalAmount = 0;\n\n    for (const item in choices) {\n        data.push({\n            \"id\": item,\n            \"label\": item,\n            \"value\": choices[item],\n            \"color\": find_party_by_name(props.parties,item).party_color,\n        });\n        totalAmount += choices[item];\n    }\n\n    const getPercentage = bar => {\n        return Math.round((bar.value / totalAmount) * 100) + \"%\";\n    }\n\n    const getColor = bar => find_party_by_name(props.parties, bar.id).party_color;\n\n    return (\n        <div style={props.style}>\n            <h1> First Vote Pie by Party </h1>\n            <ResponsivePieCanvas\n                data={data}\n                margin={{ top: 40, right: 40, bottom: 40, left: 40 }}\n                pixelRatio={2}\n                padAngle={0.7}\n                cornerRadius={1}\n                colors={getColor}\n                borderColor={{ from: 'color', modifiers: [['darker', 0.6]] }}\n                radialLabelsSkipAngle={10}\n                radialLabelsTextXOffset={6}\n                radialLabelsTextColor={{ from: 'color', modifiers: [] }}\n                radialLabelsLinkOffset={0}\n                radialLabelsLinkDiagonalLength={16}\n                radialLabelsLinkHorizontalLength={24}\n                radialLabelsLinkStrokeWidth={1}\n                radialLabelsLinkColor={{ from: 'color' }}\n                sliceLabel={getPercentage}\n                slicesLabelsSkipAngle={20}\n                slicesLabelsTextColor=\"#333333\"\n                animate={true}\n                motionStiffness={90}\n                motionDamping={15}\n            />\n        </div>\n    );\n}\n\nexport default FirstChoicePie;\n","import { CandidateState } from \"./Candidate\";\n\nexport class Round {\n    constructor(round_number, quota) {\n        this.round_number = round_number;\n        this.quota = quota;\n        this.state = RoundState.RUNNING;\n\n        this.candidates = []\n\n        this.elected_candidates = []\n        this.active_candidates = []\n        this.start_inactive_candidates = []\n        this.start_active_candidates = []\n        this.eliminated_candidates = []\n\n        this.ballots = { exhausted: 0 }\n        this.ballotsToTransfer = {}\n        this.candidate_ballots = { exhausted: [] }\n        this.candidate_real_scores = {}\n        this.candidate_scores = { exhausted: 0 }\n        this.rankings = {};\n    }\n\n    add_ballot = (ballot, value) => {\n        if (this.state === RoundState.COMPLETE)\n            throw new Error(\"Can't Add Ballot to Complete Round\");\n\n        if (this.ballots[ballot.ballot_id] !== undefined)\n            throw new Error(\"Already added Ballot\");\n\n        let candidate = this.find_next_active_candidate(ballot.candidates);\n        if (candidate !== \"exhausted\") {\n            this.candidate_ballots[candidate.candidate_id].push(ballot);\n            this.candidate_scores[candidate.candidate_id] += value;\n        } else {\n            this.candidate_ballots[candidate].push(ballot);\n            this.candidate_scores[candidate] += value;\n        }\n        this.ballots[ballot.ballot_id] = value;\n    }\n\n    find_next_active_candidate = (candidates) => {\n        for (const candidate of candidates)\n            if (this.active_candidates.includes(candidate))\n                return candidate\n        return \"exhausted\";\n    }\n\n    add_candidate = (candidate, state) => {\n        if (this.state === RoundState.COMPLETE)\n            throw new Error(\"Can't Add Ballot to Complete Round\");\n\n        this.candidates.push(candidate);\n        if (state === CandidateState.ELECTED) {\n            this.elected_candidates.push(candidate);\n            this.start_inactive_candidates.push(candidate);\n        } else if (state === CandidateState.RUNNING) {\n            this.active_candidates.push(candidate);\n            this.start_active_candidates.push(candidate);\n        } else {\n            this.eliminated_candidates.push(candidate);\n            this.start_inactive_candidates.push(candidate);\n        }\n\n        this.candidate_ballots[candidate.candidate_id] = [];\n        this.candidate_scores[candidate.candidate_id] = 0;\n    }\n\n    set_elected_candidate = (candidate) => {\n        if (this.state === RoundState.COMPLETE)\n            throw new Error(\"Round Complete\");\n\n        this.active_candidates = this.active_candidates.filter((value) => {\n            return value !== candidate\n        });\n\n        this.ballotsToTransfer[candidate.candidate_id] = { ...this.candidate_ballots[candidate.candidate_id] }\n        this.elected_candidates.push(candidate);\n    }\n\n    set_eliminate_candidate = (candidate) => {\n        if (this.state === RoundState.COMPLETE)\n            throw new Error(\"Round Complete\");\n\n        this.active_candidates = this.active_candidates.filter((value) => {\n            return value !== candidate\n        });\n\n        this.ballotsToTransfer[candidate.candidate_id] = { ...this.candidate_ballots[candidate.candidate_id] }\n        this.eliminated_candidates.push(candidate);\n    }\n\n    candidate_ballot = (candidate) => {\n        if (candidate === null)\n            candidate = \"exhausted\";\n        else if (candidate.candidate_id !== undefined)\n            candidate = candidate.candidate_id;\n\n        let ballots = [];\n        for (const ballot of this.candidate_ballots[candidate]) {\n            ballots.push([ballot, this.ballots[ballot.ballot_id]]);\n        }\n        return ballots;\n    }\n\n    candidate_score = (candidate) => {\n        if (candidate.candidate_id !== undefined)\n            return this.candidate_scores[candidate.candidate_id];\n        return this.candidate_scores[candidate];\n    }\n\n    complete = () => {\n        const isCandidateElected = (candidate_id) => {\n            for (const candidate in this.elected_candidates) {\n                if (candidate_id === this.elected_candidates[candidate].candidate_id) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        this.candidate_real_scores = { ...this.candidate_scores }\n        for (const candidate_id in this.candidate_real_scores) {\n            if (this.candidate_real_scores[candidate_id] === 0 && isCandidateElected(candidate_id)) {\n                this.candidate_real_scores[candidate_id] = this.quota;\n            }\n        }\n\n        this.state = RoundState.COMPLETE;\n    }\n}\n\nexport const RoundState = {\n    RUNNING: \"RUNNING\",\n    COMPLETE: \"COMPLETE\"\n};","\nimport { Round, RoundState } from './Round';\nimport { CandidateState } from './Candidate';\n\nexport class Race {\n\n    constructor(race_id, race_name, seats, dropped_candidates = []) {\n        this.race_id = race_id\n        this.race_name = race_name\n        this.seats = Number(seats)\n\n        this.rounds = [];\n\n        this.state = RaceState.ADDING;\n\n        // Candidates\n        this.candidates = []\n        this.inactive_candidates = dropped_candidates;\n\n        this.ballots = []\n        this.inactive_ballots = []\n\n        this.transfer_voters = []\n        this.ballots_to_apply = []\n        this.candidate_ballot_rankings = {}\n\n        this.first_scores = []\n\n        // Planning Candidates\n        this.planned_inactive_candidates = []\n        this.planned_active_candidates = []\n\n        // Set Candidate States\n        this.elected = {}\n        this.running = {}\n        this.transferring = {}\n        this.transfered = {}\n        this.excused = {}\n    }\n\n    add_candidate = (candidate, dropped = false) => {\n        if (this.state !== RaceState.ADDING)\n            throw new Error(\"Can't Add Candidates While Running\");\n\n        for (const current_candidate of this.inactive_candidates)\n            if (current_candidate.candidate_id === candidate.candidate_id)\n                return;\n\n\n        if (dropped) {\n            this.inactive_candidates.push(candidate)\n            this.excused[candidate.candidate_id] = [0]\n            return\n        }\n\n        for (const current_candidate of this.candidates)\n            if (current_candidate.candidate_id === candidate.candidate_id)\n                return;\n        this.running[candidate.candidate_id] = [0, this.running.length];\n        this.candidates.push(candidate);\n    }\n\n    add_ballot = (ballot) => {\n        const find_next_active_candidate = (candidates) => {\n            for (const candidate of candidates)\n                if (this.candidates.includes(candidate))\n                    return candidate\n            return null;\n        }\n        if (this.state !== RaceState.ADDING)\n            throw new Error(\"Can't Add Ballots While Running\");\n\n        if (find_next_active_candidate(ballot.candidates) === null) {\n            this.inactive_ballots.push(ballot)\n            return;\n        }\n        for (let i = 0; i < this.ballots.length; i++)\n            if (this.ballots[i].ballot_id === ballot.ballot_id)\n                return;\n        this.ballots.push(ballot);\n    }\n\n    reset_race = () => {\n        const find_next_active_candidate = (candidates) => {\n            for (const candidate of candidates)\n                if (this.candidates.includes(candidate))\n                    return candidate\n            return null;\n        }\n        if (this.state === RaceState.ADDING)\n            return;\n\n        this.state = RaceState.ADDING;\n        this.rounds = []\n        this.transfer_voters = []\n        this.ballots_to_apply = []\n        this.candidate_ballot_rankings = {}\n\n        // Set Candidates Correctely\n        for (const candidate of this.planned_inactive_candidates) {\n            this.inactive_candidates.push(candidate)\n            this.candidates = this.candidates.filter((value) => {\n                return value !== candidate\n            });\n        }\n\n        for (const candidate of this.planned_active_candidates) {\n            this.candidates.push(candidate)\n            this.inactive_candidates = this.inactive_candidates.filter((value) => {\n                return value !== candidate\n            });\n        }\n\n        // Reset Candidate States\n        this.elected = {}\n        this.running = {}\n        this.transferring = {}\n        this.transfered = {}\n        this.excused = {}\n        this.first_scores = []\n\n        // Set Candidate States according to candidates\n        for (const candidate of this.candidates) {\n            this.running[candidate.candidate_id] = [0, this.running.length];\n        }\n\n        for (const candidate of this.inactive_candidates) {\n            this.excused[candidate.candidate_id] = [0]\n        }\n\n        // Lastly, Reset the Ballots\n        for (const ballot of this.ballots) {\n            if (find_next_active_candidate(ballot.candidates) === null) {\n                this.inactive_ballots.push(ballot);\n                this.ballots = this.ballots.filter((value) => {\n                    return value !== ballot\n                });\n            }\n        }\n\n        for (const ballot of this.inactive_ballots) {\n            if (find_next_active_candidate(ballot.candidates) !== null) {\n                this.add_ballot(ballot)\n                this.inactive_ballots = this.inactive_ballots.filter((value) => {\n                    return value !== ballot\n                });\n            }\n        }\n        console.log(\"Race Reset: \", this.race_name)\n\n    }\n\n    excuse_candidate = (candidate) => {\n        const find_next_active_candidate = (candidates) => {\n            for (const candidate of candidates)\n                if (this.candidates.includes(candidate))\n                    return candidate\n            return null;\n        }\n\n        // Check if Excused Already Excused\n        for (const current_candidate of this.inactive_candidates) {\n            if (current_candidate.candidate_id === candidate.candidate_id) {\n                return;\n            }\n        }\n\n        if (this.state !== RaceState.ADDING) {\n            this.planned_inactive_candidates.push(candidate)\n            return;\n        }\n\n        delete this.elected[candidate.candidate_id];\n        delete this.running[candidate.candidate_id];\n        delete this.transferring[candidate.candidate_id];\n        delete this.transfered[candidate.candidate_id];\n\n        this.candidates = this.candidates.filter((value) => {\n            return value !== candidate\n        });\n\n\n        this.inactive_candidates.push(candidate)\n        this.excused[candidate.candidate_id] = [0]\n\n        for (const ballot of this.ballots) {\n            if (find_next_active_candidate(ballot.candidates) === null) {\n                this.inactive_ballots.push(ballot);\n                this.ballots = this.ballots.filter((value) => {\n                    return value !== ballot\n                });\n            }\n        }\n    }\n\n    unexcuse_candidate = (candidate) => {\n        const find_next_active_candidate = (candidates) => {\n            for (const candidate of candidates)\n                if (this.candidates.includes(candidate))\n                    return candidate\n            return null;\n        }\n\n        // Check if Already Not Excused\n        for (const current_candidate of this.candidates) {\n            if (current_candidate.candidate_id === candidate.candidate_id) {\n                return;\n            }\n        }\n\n        if (this.state !== RaceState.ADDING) {\n\n            // Check if excused in planned inactive\n            for (const current_candidate of this.planned_inactive_candidates) {\n                if (current_candidate.candidate_id === candidate.candidate_id) {\n                    this.inactive_candidates = this.inactive_candidates.filter((value) => {\n                        return value !== candidate\n                    });\n                    return;\n                }\n            }\n\n            this.planned_active_candidates.push(candidate)\n            return;\n        }\n\n        delete this.excused[candidate.candidate_id];\n        this.inactive_candidates = this.inactive_candidates.filter((value) => {\n            return value !== candidate\n        });\n\n        this.running[candidate.candidate_id] = [0, this.running.length];\n        this.candidates.push(candidate);\n\n        for (const ballot of this.inactive_ballots)\n            if (find_next_active_candidate(ballot.candidates) !== null) {\n                this.add_ballot(ballot)\n                this.inactive_ballots = this.inactive_ballots.filter((value) => {\n                    return value !== ballot\n                });\n            }\n    }\n\n    num_candidates = () => {\n        return this.candidates.length;\n    }\n\n    quota = () => {\n        if (this.state === RaceState.ADDING)\n            throw new Error(\"Can't Get Quota While Adding Ballots\");\n        return Math.floor(this.ballots.length / (this.seats + 1)) + 1;\n    }\n\n    currentScores = () => {\n        const find_candidate_by_id = (id) => {\n            for (const candidate of this.candidates)\n                if (candidate.candidate_id === id)\n                    return candidate;\n            for (const candidate of this.inactive_candidates)\n                if (candidate.candidate_id === id)\n                    return candidate;\n            return null;\n        }\n        let scores = [];\n        for (const candidate in this.elected) {\n            scores.push({\n                candidate: find_candidate_by_id(candidate),\n                score: this.elected[candidate][0],\n            });\n        }\n        for (const candidate in this.running) {\n            scores.push({\n                candidate: find_candidate_by_id(candidate),\n                score: this.running[candidate][0],\n            });\n        }\n        for (const candidate in this.transferring) {\n            scores.push({\n                candidate: find_candidate_by_id(candidate),\n                score: this.transferring[candidate][0],\n            });\n        }\n        for (const candidate in this.transfered) {\n            scores.push({\n                candidate: find_candidate_by_id(candidate),\n                score: this.transfered[candidate][0],\n            });\n        }\n        for (const candidate in this.inactive_candidates) {\n            scores.push({\n                candidate: find_candidate_by_id(candidate),\n                score: 0,\n            });\n        }\n        return scores;\n    }\n\n    candidateTable = () => {\n        const find_candidate_by_id = (id) => {\n            for (const candidate of this.candidates)\n                if (candidate.candidate_id === id)\n                    return candidate;\n            for (const candidate of this.inactive_candidates)\n                if (candidate.candidate_id === id)\n                    return candidate;\n            return null;\n        }\n        let quota = 0;\n        if (this.state !== RaceState.ADDING)\n            quota = this.quota();\n\n        let candidateTable = []\n        // Candidate, Status, Position, Score\n\n        for (const candidate in this.elected) {\n            candidateTable.push({\n                candidate: find_candidate_by_id(candidate),\n                status: CandidateState.ELECTED,\n                position: this.elected[candidate][1],\n                score: this.elected[candidate][0],\n                quota: quota,\n            });\n        }\n        for (const candidate in this.running) {\n            if (this.state === RaceState.ADDING) {\n                candidateTable.push({\n                    candidate: find_candidate_by_id(candidate),\n                    status: CandidateState.RUNNING,\n                    position: candidateTable.length,\n                    score: this.running[candidate][0],\n                    quota: quota,\n                });\n            } else {\n                candidateTable.push({\n                    candidate: find_candidate_by_id(candidate),\n                    status: CandidateState.RUNNING,\n                    position: this.running[candidate][1],\n                    score: this.running[candidate][0],\n                    quota: quota,\n                });\n            }\n        }\n        for (const candidate in this.transferring) {\n            candidateTable.push({\n                candidate: find_candidate_by_id(candidate),\n                status: CandidateState.TRANSFERRING,\n                position: this.transferring[candidate][1],\n                score: this.transferring[candidate][0],\n                quota: quota,\n            });\n        }\n        for (const candidate in this.transfered) {\n            candidateTable.push({\n                candidate: find_candidate_by_id(candidate),\n                status: CandidateState.TRANSFERED,\n                position: this.transfered[candidate][1],\n                score: this.transfered[candidate][0],\n                quota: quota,\n            });\n        }\n\n        for (const candidate in this.excused) {\n            candidateTable.push({\n                candidate: find_candidate_by_id(candidate),\n                status: CandidateState.EXCUSED,\n                position: this.candidates.length,\n                score: 0,\n                quota: quota,\n            });\n        }\n        return candidateTable;\n    }\n\n    start_tabulation = () => {\n        if (this.state === RaceState.ADDING)\n            this.state = RaceState.TABULATING;\n    }\n\n    run_race_step = () => {\n        const begin_race = () => {\n            console.log(\"Beginning Race for\", this.race_name);\n            console.log(\"Total Voters is: \" + this.ballots.length + \" , for \" + this.seats + \" seats.\")\n            console.log(\"Quota is\", this.quota())\n            if (this.ballots.length === 0) {\n                this.state = RaceState.COMPLETE;\n                console.log(\"No Ballots Cast in Race\");\n            }\n            else {\n                let round = new Round(0, this.quota());\n\n                for (let i = 0; i < this.candidates.length; i++) {\n                    round.add_candidate(this.candidates[i], CandidateState.RUNNING);\n                }\n\n\n                for (let i = 0; i < this.ballots.length; i++) {\n                    this.ballots_to_apply.push([this.ballots[i], 1]);\n                }\n                this.rounds.push(round);\n            }\n        }\n\n        const add_round = () => {\n            const find_candidate_by_id = (id) => {\n                for (const candidate of this.candidates)\n                    if (candidate.candidate_id === id)\n                        return candidate;\n                for (const candidate of this.inactive_candidates)\n                    if (candidate.candidate_id === id)\n                        return candidate;\n                return null;\n            }\n            console.log(\"Starting Round\", this.rounds.length);\n            let round = new Round(this.rounds.length, this.quota());\n            let previousRound = this.rounds[this.rounds.length - 1];\n\n            for (const candidate in this.elected) {\n                round.add_candidate(find_candidate_by_id(candidate), CandidateState.ELECTED);\n            }\n            for (const candidate in this.running) {\n                round.add_candidate(find_candidate_by_id(candidate), CandidateState.RUNNING);\n                for (const ballot of previousRound.candidate_ballot(candidate)) {\n                    round.add_ballot(ballot[0], ballot[1]);\n                }\n            }\n            for (const candidate in this.transferring) {\n                round.add_candidate(find_candidate_by_id(candidate), CandidateState.TRANSFERRING);\n            }\n            for (const candidate in this.transfered) {\n                round.add_candidate(find_candidate_by_id(candidate), CandidateState.TRANSFERED);\n            }\n            for (const candidate in this.excused) {\n                round.add_candidate(find_candidate_by_id(candidate), CandidateState.EXCUSED);\n            }\n\n            for (const ballot of previousRound.candidate_ballot(null)) {\n                round.add_ballot(ballot[0], ballot[1]);\n            }\n\n            this.rounds.push(round);\n        }\n\n        const elect_candidate = (candidate, score, currentRound) => {\n            console.log(\"Electing Candidate: \", candidate.candidate_name, \" (\", score, \")\");\n            currentRound.set_elected_candidate(candidate);\n\n            this.elected[candidate.candidate_id] = [score, Object.keys(this.elected).length];\n            delete this.running[candidate.candidate_id];\n\n            const surplus = score - this.quota();\n\n            let transfer_value = 1;\n            if (surplus > 0) {\n                transfer_value = surplus / score;\n            }\n\n            for (const ballot of currentRound.candidate_ballot(candidate)) {\n                this.ballots_to_apply.push([ballot[0], ballot[1] * transfer_value]);\n            }\n        }\n\n        const transfer_candidate = (candidate, score, currentRound) => {\n            console.log(\"Transferring Candidate \", candidate.candidate_name, \" (\", score, \")\");\n            currentRound.set_eliminate_candidate(candidate);\n\n            this.transferring[candidate.candidate_id] = [score, Object.keys(this.elected).length + Object.keys(this.running).length - 1];\n            delete this.running[candidate.candidate_id];\n\n            for (const ballot of currentRound.candidate_ballot(candidate))\n                this.ballots_to_apply.push(ballot)\n        }\n\n        const complete_round = (currentRound) => {\n            console.log(\"Completed Round\", currentRound.round_number);\n            currentRound.complete();\n\n            if (currentRound.active_candidates.length === 0) {\n                console.log(\"Race Complete\");\n                for (const candidate in this.transferring) {\n                    this.transfered[candidate] = this.transferring[candidate];\n                    delete this.transferring[candidate]\n                }\n                console.log(this.rounds);\n                this.state = RaceState.COMPLETE;\n            }\n        }\n\n        if (this.state === RaceState.COMPLETE)\n            return;\n        this.state = RaceState.TABULATING;\n\n        if (this.rounds.length === 0) {\n            begin_race();\n            return;\n        }\n\n        let currentRound = this.rounds[this.rounds.length - 1];\n        if (currentRound.state === RoundState.COMPLETE) {\n            add_round();\n            return;\n        }\n\n        if (this.ballots_to_apply.length > 0) {\n            let ballot = this.ballots_to_apply.shift();\n            currentRound.add_ballot(ballot[0], ballot[1]);\n\n            if (this.rounds.length === 1) {\n                const find_next_active_candidate = (candidates) => {\n                    for (const candidate of candidates)\n                        if (this.candidates.includes(candidate))\n                            return candidate\n                    return null;\n                }\n\n                for (let i = 0; i < ballot[0].candidates.length; i++) {\n                    const candidate = ballot[0].candidates[i];\n                    if (this.candidate_ballot_rankings[candidate] === undefined)\n                        this.candidate_ballot_rankings[candidate] = [];\n                    while (this.candidate_ballot_rankings[candidate].length < i + 1)\n                        this.candidate_ballot_rankings[candidate].push(0);\n                    this.candidate_ballot_rankings[candidate][i] += 1\n                }\n\n                let first_round_score = {};\n                if (this.first_scores.length !== 0) {\n                    first_round_score = { ...this.first_scores[this.first_scores.length - 1] };\n                }\n                let candidate = find_next_active_candidate(ballot[0].candidates)\n                if (candidate !== null) {\n                    if (candidate.candidate_id in first_round_score)\n                        first_round_score[candidate.candidate_id] += 1;\n                    else\n                        first_round_score[candidate.candidate_id] = 1;\n                    this.first_scores.push(first_round_score);\n                }\n            }\n\n            let activeCandidates = currentRound.active_candidates.sort((x, y) => {\n                if (currentRound.candidate_score(x) > currentRound.candidate_score(y)) {\n                    return -1;\n                } else if (currentRound.candidate_score(y) > currentRound.candidate_score(x)) {\n                    return 1;\n                }\n                return 0;\n            });\n\n            for (let i = 0; i < activeCandidates.length; i++) {\n                this.running[activeCandidates[i].candidate_id] = [currentRound.candidate_score(activeCandidates[i]), Object.keys(this.elected).length + i];\n            }\n\n            return;\n        }\n\n        for (const candidate in this.transferring) {\n            this.transfered[candidate] = this.transferring[candidate];\n            delete this.transferring[candidate]\n        }\n\n        let activeCandidates = currentRound.active_candidates.sort((x, y) => {\n            if (currentRound.candidate_score(x) > currentRound.candidate_score(y)) {\n                return -1;\n            } else if (currentRound.candidate_score(y) > currentRound.candidate_score(x)) {\n                return 1;\n            }\n            return 0;\n        });\n\n        let roundElected = [];\n        let maxElected = this.seats - Object.keys(this.elected).length;\n\n        if (activeCandidates.length <= maxElected) {\n            for (const candidate of activeCandidates) {\n                if (currentRound.elected_candidates) {\n                    roundElected.push(candidate);\n                }\n            }\n        } else {\n            for (const candidate of activeCandidates) {\n                if (currentRound.candidate_score(candidate) >= this.quota()) {\n                    roundElected.push(candidate);\n                }\n            }\n        }\n\n        for (const candidate of roundElected) {\n            elect_candidate(candidate, currentRound.candidate_score(candidate), currentRound);\n        }\n\n        let roundTransfer = [];\n        if (Object.keys(this.elected).length === this.seats) {\n            for (const candidate of activeCandidates.reverse()) {\n                roundTransfer.push(candidate);\n            }\n        } else if (roundElected.length === 0) {\n            roundTransfer.push(activeCandidates[activeCandidates.length - 1]);\n        }\n\n        for (const candidate of roundTransfer) {\n            if (!currentRound.elected_candidates.includes(candidate)) {\n                transfer_candidate(candidate, currentRound.candidate_score(candidate), currentRound);\n            }\n        }\n\n        complete_round(currentRound);\n    }\n};\n\nexport const RaceState = {\n    ADDING: \"ADDING\",\n    TABULATING: \"TABULATING\",\n    COMPLETE: \"COMPLETE\"\n};","import React from 'react';\n\nimport { ResponsivePieCanvas } from '@nivo/pie';\nimport { RaceState } from '../../../Data_Models/Race';\n\nfunction PartyPercentage(props) {\n    const find_candidate_by_id = (race, id) => {\n        for (const candidate of race.candidates)\n            if (candidate.candidate_id === id)\n                return candidate;\n        return null;\n    }\n\n    const find_party_by_name = (name) => {\n        for (let i = 0; i < props.parties.length; i++)\n            if (props.parties[i].party_name === name)\n                return props.parties[i];\n        return null\n    };\n\n    const get_ranked_choices = (race, party) => {\n        let ranked_choices = 0;\n        for (const candidate in race.elected) {\n            if (find_candidate_by_id(race, candidate).candidate_party === party)\n                ranked_choices += 1;\n        }\n        return ranked_choices;\n    }\n\n    let choices = {};\n    for (const party of props.parties) {\n        let ranked_choices = get_ranked_choices(props.race, party);\n        if (ranked_choices > 0)\n            choices[party.party_name] = get_ranked_choices(props.race, party);\n    }\n\n    let data = [];\n    let totalAmount = 0;\n\n    for (const item in choices) {\n        data.push({\n            \"id\": item,\n            \"label\": item,\n            \"value\": choices[item],\n            \"color\": find_party_by_name(item).party_color,\n        });\n        totalAmount += choices[item];\n    }\n\n    const getPercentage = bar => {\n        return Math.round((bar.value / totalAmount) * 100) + \"%\";\n    }\n\n    const getColor = bar => find_party_by_name(bar.id).party_color;\n\n    // Wait until a candidate is actually elected to display\n    if (Object.entries(props.race.elected).length === 0 && props.race.elected.constructor === Object)\n        return (<div></div>)\n\n    return (\n        <div style={props.style}>\n            <h1> Candidates Elected By Party </h1>\n            <ResponsivePieCanvas\n                data={data}\n                margin={{ top: 40, right: 40, bottom: 40, left: 40 }}\n                pixelRatio={2}\n                padAngle={0.7}\n                cornerRadius={1}\n                colors={getColor}\n                borderColor={{ from: 'color', modifiers: [['darker', 0.6]] }}\n                radialLabelsSkipAngle={10}\n                radialLabelsTextXOffset={6}\n                radialLabelsTextColor={{ from: 'color', modifiers: [] }}\n                radialLabelsLinkOffset={0}\n                radialLabelsLinkDiagonalLength={16}\n                radialLabelsLinkHorizontalLength={24}\n                radialLabelsLinkStrokeWidth={1}\n                radialLabelsLinkColor={{ from: 'color' }}\n                sliceLabel={getPercentage}\n                slicesLabelsSkipAngle={20}\n                slicesLabelsTextColor=\"#333333\"\n                animate={true}\n                motionStiffness={90}\n                motionDamping={15}\n            />\n        </div>\n    );\n}\n\nexport default PartyPercentage;\n","import React from 'react';\n\nimport { ResponsivePieCanvas } from '@nivo/pie';\n\nfunction PartyPercentage(props) {\n\n    const get_ranked_choices = (race) => {\n        let ballots = race.ballots;\n        let ranked_choices = {};\n        for (const ballot of ballots) {\n            const num_ranked = ballot.candidates.length;\n            maxChoices = Math.max(num_ranked, maxChoices);\n            if (num_ranked in ranked_choices)\n                ranked_choices[num_ranked] += 1;\n            else\n                ranked_choices[num_ranked] = 1;\n        }\n        return ranked_choices;\n    }\n\n    let maxChoices = 0;\n    let choices = get_ranked_choices(props.race);\n\n    let data = [];\n    let totalAmount = 0;\n\n    for (const item in choices) {\n        data.push({\n            \"id\": item,\n            \"label\": item,\n            \"value\": choices[item]\n        });\n        totalAmount += choices[item];\n    }\n\n    const getPercentage = bar => {\n        return Math.round((bar.value / totalAmount) * 100) + \"%\";\n    }\n\n\n\n    return (\n        <div style={props.style}>\n            <h1> Number of Candidates Ranked </h1>\n            <ResponsivePieCanvas\n                data={data}\n                margin={{ top: 40, right: 40, bottom: 40, left: 40 }}\n                pixelRatio={2}\n                padAngle={0.3}\n                cornerRadius={1}\n                colors={{ scheme: 'nivo' }}\n                borderColor={{ from: 'color', modifiers: [['darker', 0.6]] }}\n                radialLabelsSkipAngle={10}\n                radialLabelsTextXOffset={6}\n                radialLabelsTextColor={{ from: 'color', modifiers: [] }}\n                radialLabelsLinkOffset={0}\n                radialLabelsLinkDiagonalLength={16}\n                radialLabelsLinkHorizontalLength={24}\n                radialLabelsLinkStrokeWidth={1}\n                radialLabelsLinkColor={{ from: 'color' }}\n                sliceLabel={getPercentage}\n                slicesLabelsSkipAngle={20}\n                slicesLabelsTextColor=\"#333333\"\n                animate={true}\n                motionStiffness={90}\n                motionDamping={15}\n            />\n        </div>\n    );\n}\n\nexport default PartyPercentage;\n","import React from 'react';\n\nimport { ResponsiveBarCanvas } from '@nivo/bar'\n\nfunction CandidatesRanked(props) {\n    const find_party_by_name = (name) => {\n        for (let i = 0; i < props.parties.length; i++)\n            if (props.parties[i].party_name === name)\n                return props.parties[i];\n        return null\n    };\n\n    const get_ranked_choices = (race, party) => {\n        let ballots = race.ballots;\n        let ranked_choices = {};\n        for (const ballot of ballots) {\n            if (ballot.candidates[0].candidate_party.party_name !== party.party_name)\n                continue;\n            const num_ranked = ballot.candidates.length;\n            maxChoices = Math.max(num_ranked, maxChoices);\n            if (num_ranked in ranked_choices)\n                ranked_choices[num_ranked] += 1;\n            else\n                ranked_choices[num_ranked] = 1;\n        }\n        return ranked_choices;\n    }\n\n    let maxChoices = 0;\n    let choices = {};\n    let keys = []\n    for (const party of props.parties) {\n        choices[party.party_name] = get_ranked_choices(props.race, party);\n        keys.push(party.party_name);\n    }\n\n    let data = [];\n\n    for (let i = 1; i < maxChoices + 1; i++) {\n        let data_to_add = { index: i };\n        for (const item in choices) {\n            if (i in choices[item]) {\n                data_to_add[item] = choices[item][i];\n                data_to_add[item + \"Color\"] = choices[item][i];\n            }\n        }\n        data.push(data_to_add);\n    }\n    const getColor = bar => find_party_by_name(bar.id).party_color;\n\n    return (\n        <div style={props.style}>\n            <h1> Number of Candidates Ranked </h1>\n            <ResponsiveBarCanvas\n                data={data}\n                keys={keys}\n                indexBy=\"index\"\n                margin={{ top: 40, right: 40, bottom: 40, left: 60 }}\n                pixelRatio={2}\n                padding={0.05}\n                innerPadding={0}\n                minValue=\"auto\"\n                maxValue=\"auto\"\n                groupMode=\"stacked\"\n                layout=\"vertical\"\n                reverse={false}\n                colors={getColor}\n                colorBy=\"id\"\n                borderWidth={0}\n                borderColor={{ from: 'color', modifiers: [['darker', 1.6]] }}\n                axisTop={null}\n                axisRight={null}\n                axisBottom={{\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    legend: '# of Candidates Ranked',\n                    legendPosition: 'middle',\n                    legendOffset: 30\n                }}\n                axisLeft={{\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    legend: '# of Voters',\n                    legendPosition: 'middle',\n                    legendOffset: -40\n                }}\n                enableGridX={false}\n                enableGridY={true}\n                enableLabel={false}\n                labelSkipWidth={12}\n                labelSkipHeight={12}\n                labelTextColor={{ from: 'color', modifiers: [['darker', 1.6]] }}\n                isInteractive={true}\n            />\n        </div>\n    );\n}\n\nexport default CandidatesRanked;\n","import React from 'react';\n\nimport { ResponsiveLine } from '@nivo/line'\nimport { RaceState } from '../../../Data_Models/Race';\n\n\nfunction PartyPercentage(props) {\n    const find_party_by_name = (name) => {\n        for (let i = 0; i < props.parties.length; i++)\n            if (props.parties[i].party_name === name)\n                return props.parties[i];\n        return null\n    };\n\n    const get_ranked_choices = (race, party) => {\n        let ballots = race.ballots;\n        let ranked_choices = {};\n        for (const ballot of ballots) {\n            for (let i = 0; i < ballot.candidates.length; i++) {\n                maxchoices = Math.max(i, maxchoices);\n                if (ballot.candidates[i].candidate_party.party_name === party.party_name)\n                    if (i in ranked_choices)\n                        ranked_choices[i] += 1;\n                    else\n                        ranked_choices[i] = 1;\n            }\n        }\n        return ranked_choices;\n    }\n    let maxchoices = 0;\n    let choices = {};\n    for (const party of props.parties) {\n        choices[party.party_name] = get_ranked_choices(props.race, party);\n    }\n\n    let data = [];\n    for (const item in choices) {\n        let datapoints = [];\n        for (let i = 1; i < maxchoices + 1; i++) {\n            if (i in choices[item])\n                datapoints.push({ x: i, y: choices[item][i - 1] })\n        }\n        data.push({\n            id: item,\n            color: find_party_by_name(item).party_color,\n            data: datapoints,\n        });\n    }\n\n    const getColor = bar => find_party_by_name(bar.id).party_color;\n\n    if (props.race.state === RaceState.ADDING)\n        return (<div></div>)\n\n    return (\n        <div style={props.style}>\n            <ResponsiveLine\n                data={data}\n                margin={{ top: 50, right: 110, bottom: 50, left: 60 }}\n                xScale={{ type: 'linear', min: 1 }}\n                yScale={{ type: 'linear', min: 0, max: 'auto', stacked: true, reverse: false }}\n                axisBottom={{\n                    orient: 'bottom',\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    legend: 'Round',\n                    legendOffset: 36,\n                    legendPosition: 'middle'\n                }}\n                axisLeft={{\n                    orient: 'left',\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    legend: 'Votes',\n                    legendOffset: -40,\n                    legendPosition: 'middle'\n                }}\n                colors={getColor}\n                enablePoints={false}\n                enableArea={true}\n                areaOpacity={1}\n                useMesh={true}\n            />\n        </div>\n    );\n}\n\nexport default PartyPercentage;\n","import React from 'react';\n\nimport { ResponsivePieCanvas } from '@nivo/pie';\nimport { RaceState } from '../../../Data_Models/Race';\n\nfunction CandidatesRanked(props) {\n\n    const get_first_elected = (ballot, elected) => {\n        for (let i = 0; i < ballot.candidates.length; i++) {\n            for (const candidate in elected) {\n                if (candidate === ballot.candidates[i].candidate_id) {\n                    return i + 1\n                }\n            }\n        }\n        return \"Exhausted\"\n    }\n\n    const get_ranked_choices = (race) => {\n        let ranked_choices = {};\n        for (const ballot of race.ballots) {\n            maxChoices = Math.max(ballot.candidates.length, maxChoices);\n        }\n\n        for (let i = 1; i < maxChoices + 1; i++) {\n            ranked_choices[i] = 0\n        }\n        ranked_choices[\"Exhausted\"] = 0\n\n        for (const ballot of race.ballots) {\n            ranked_choices[get_first_elected(ballot, race.elected)] += 1;\n        }\n\n        return ranked_choices\n    }\n\n    let maxChoices = 0;\n    let choices = get_ranked_choices(props.race);\n\n    let data = [];\n    let totalAmount = 0;\n\n    for (const item in choices) {\n        if (choices[item] > 0) {\n            data.push({\n                \"id\": item,\n                \"label\": item,\n                \"value\": choices[item]\n            });\n            totalAmount += choices[item];\n        }\n    }\n\n    const getPercentage = bar => {\n        return Math.round((bar.value / totalAmount) * 100) + \"%\";\n    }\n\n    if (Object.entries(props.race.elected).length === 0 && props.race.elected.constructor === Object)\n        return (<div></div>)\n\n    return (\n        <div style={props.style}>\n            <h1> Voter Satisfaction </h1>\n            <ResponsivePieCanvas\n                data={data}\n                margin={{ top: 40, right: 40, bottom: 40, left: 40 }}\n                pixelRatio={2}\n                padAngle={0.3}\n                cornerRadius={1}\n                colors={{ scheme: 'nivo' }}\n                borderColor={{ from: 'color', modifiers: [['darker', 0.6]] }}\n                radialLabelsSkipAngle={10}\n                radialLabelsTextXOffset={6}\n                radialLabelsTextColor={{ from: 'color', modifiers: [] }}\n                radialLabelsLinkOffset={0}\n                radialLabelsLinkDiagonalLength={16}\n                radialLabelsLinkHorizontalLength={24}\n                radialLabelsLinkStrokeWidth={1}\n                radialLabelsLinkColor={{ from: 'color' }}\n                sliceLabel={getPercentage}\n                slicesLabelsSkipAngle={20}\n                slicesLabelsTextColor=\"#333333\"\n                animate={true}\n                motionStiffness={90}\n                motionDamping={15}\n            />\n        </div>\n    );\n}\n\nexport default CandidatesRanked;\n","import React from 'react';\n\nimport { ResponsiveLineCanvas } from '@nivo/line'\nimport { RaceState } from '../../../Data_Models/Race';\n\nfunction VoteOverTime(props) {\n    const find_party_by_name = (name) => {\n        for (let i = 0; i < props.parties.length; i++)\n            if (props.parties[i].party_name === name)\n                return props.parties[i];\n        return null\n    };\n\n    const find_candidate_by_id = (candidate_id) => {\n        for (let i = 0; i < props.race.candidates.length; i++)\n            if (String(props.race.candidates[i].candidate_id) === candidate_id)\n                return props.race.candidates[i];\n        return null;\n    };\n\n    let choices_over_time = {};\n    for (const party of props.parties) {\n        choices_over_time[party.party_name] = [];\n    }\n\n    let increment = 1;\n    if (props.race.first_scores.length > 50)\n        increment = Math.floor(props.race.first_scores.length / 100);\n\n    for (let i = 0; i < props.race.first_scores.length; i += 1) {\n        const score_chart = props.race.first_scores[i];\n\n        let choices = {}\n        for (const party of props.parties) {\n            choices[party.party_name] = 0;\n        }\n\n        for (const candidate_id in score_chart) {\n            const candidate = find_candidate_by_id(candidate_id);\n            choices[candidate.candidate_party.party_name] += score_chart[candidate_id];\n        }\n\n        for (const party of props.parties) {\n            choices_over_time[party.party_name] = [...choices_over_time[party.party_name], choices[party.party_name]];\n        }\n    }\n\n    let data = [];\n    for (const item in choices_over_time) {\n        let datapoints = [];\n        for (let i = 0; i < choices_over_time[item].length; i++) {\n            if (choices_over_time[item][i] !== 0) {\n                datapoints.push({ x: (i * 1), y: ((choices_over_time[item][i]) / ((i + 1) * 1) * 100) })\n            }\n        }\n        data.push({\n            id: item,\n            color: find_party_by_name(item).party_color,\n            data: datapoints,\n        });\n    }\n\n    const getColor = bar => find_party_by_name(bar.id).party_color;\n\n    if (props.race.state === RaceState.ADDING)\n        return (<div></div>)\n\n    return (\n        <div style={props.style}>\n            <h1> Party Vote Over Time </h1>\n            <ResponsiveLineCanvas\n                data={data}\n                margin={{ top: 50, right: 160, bottom: 50, left: 60 }}\n                xScale={{ type: 'linear' }}\n                xFormat={',.2r'}\n                yScale={{ type: 'linear', stacked: false, min: 0, max: 100 }}\n                yFormat={',.2r'}\n                axisBottom={{\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    tickValues: 5,\n                    legend: 'Votes',\n                    legendOffset: 36,\n                    legendPosition: 'middle'\n                }}\n                axisLeft={{\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    legend: 'Percentage',\n                    legendOffset: -40,\n                    legendPosition: 'middle'\n                }}\n                enableGridX={false}\n                colors={getColor}\n                lineWidth={1}\n                enablePoints={false}\n            />\n        </div>\n    );\n}\n\nexport default VoteOverTime;\n","import React from 'react';\n\nimport { ResponsiveBump } from '@nivo/bump'\nimport { RaceState } from '../../../Data_Models/Race';\n\n\nfunction VoteOverTimeBump(props) {\n    const indexOfMax = (arr) => {\n        if (arr.length === 0) {\n            return -1;\n        }\n        var max = arr[0];\n        var maxIndex = 0;\n        for (var i = 1; i < arr.length; i++) {\n            if (arr[i] > max) {\n                maxIndex = i;\n                max = arr[i];\n            }\n        }\n\n        return maxIndex;\n    }\n\n\n    let choices_over_time = [];\n\n    if (props.race.first_scores.length <= 1)\n        return (<div></div>);\n\n    let increment = 1;\n    if (props.race.first_scores.length > 50)\n        increment = Math.floor(props.race.first_scores.length / 50);\n\n    for (let i = 0; i < props.race.first_scores.length; i += increment) {\n        const score_chart = props.race.first_scores[i]\n\n        let candidate_positions = {};\n        let candidates = []\n        let scores = []\n        for (const candidate of props.race.candidates) {\n            candidates.push(candidate);\n            if (candidate.candidate_id in score_chart)\n                scores.push(score_chart[candidate.candidate_id]);\n            else\n                scores.push(0);\n        }\n\n        let position = 1;\n        while (scores.length > 0) {\n            let i = indexOfMax(scores);\n            scores.splice(i, 1);\n            candidate_positions[candidates[i].candidate_id] = position;\n            candidates.splice(i, 1);\n            position++;\n        }\n        choices_over_time.push(candidate_positions);\n    }\n\n\n    let data = [];\n    for (const candidate of props.race.candidates) {\n        let datapoint = []\n        for (let i = 0; i < choices_over_time.length; i++) {\n            datapoint.push({ x: (i + 1) * increment, y: choices_over_time[i][candidate.candidate_id] });\n        }\n        data.push({ id: candidate.candidate_name, data: datapoint });\n    }\n\n    const getCandidateByName = (name) => {\n        for (const candidate of props.race.candidates) {\n            if (candidate.candidate_name === name)\n                return candidate;\n        }\n        return null;\n    }\n\n    const getColor = (bar) => {\n        return getCandidateByName(bar.id).candidate_color\n    }\n\n    if (props.race.state === RaceState.ADDING)\n        return (<div></div>)\n\n    return (\n        <div style={props.style}>\n            <h1> Candidate Rank Over Time </h1>\n            <ResponsiveBump\n                data={data}\n                margin={{ top: 40, right: 100, bottom: 40, left: 60 }}\n                colors={getColor}\n                lineWidth={3}\n                activeLineWidth={6}\n                inactiveLineWidth={3}\n                inactiveOpacity={0.15}\n                pointSize={0}\n                activePointSize={0}\n                inactivePointSize={0}\n                axisTop={null}\n                axisRight={null}\n                axisBottom={{\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 90,\n                    tickValues: 5,\n                    format: \".2s\",\n                    legend: '',\n                    legendPosition: 'middle',\n                    legendOffset: 32\n                }}\n                axisLeft={{\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    legend: 'ranking',\n                    legendPosition: 'middle',\n                    legendOffset: -40\n                }}\n            />\n        </div>\n    );\n}\n\nexport default VoteOverTimeBump;\n","import React from 'react';\n\nimport { ResponsiveBump } from '@nivo/bump'\nimport { RaceState } from '../../../Data_Models/Race';\n\n\nfunction RoundCandidateBump(props) {\n\n    if (props.race.rounds.length <= 1)\n        return (<div></div>);\n\n    let data = []\n\n    for (const candidate of props.race.candidates) {\n        let datapoint = []\n        for (const round of props.race.rounds) {\n            if (round.elected_candidates.includes(candidate)) {\n                datapoint.push({ x: round.round_number + 1, y: props.race.elected[candidate.candidate_id][1] + 1 });\n            } else if (round.eliminated_candidates.includes(candidate)) {\n                if (candidate.candidate_id in props.race.transferring)\n                    datapoint.push({ x: round.round_number + 1, y: props.race.transferring[candidate.candidate_id][1] + 1 });\n                else\n                    datapoint.push({ x: round.round_number + 1, y: props.race.transfered[candidate.candidate_id][1] + 1 });\n            } else {\n                let active_candidates = round.active_candidates.sort((x, y) => {\n                    if (round.candidate_score(x) > round.candidate_score(y)) {\n                        return -1;\n                    } else if (round.candidate_score(y) > round.candidate_score(x)) {\n                        return 1;\n                    }\n                    return 0;\n                });\n                datapoint.push({ x: round.round_number + 1, y: active_candidates.indexOf(candidate) + round.elected_candidates.length + 1 });\n            }\n        }\n        data.push({ id: candidate.candidate_name, data: datapoint });\n    }\n\n    const getCandidateByName = (name) => {\n        for (const candidate of props.race.candidates) {\n            if (candidate.candidate_name === name)\n                return candidate;\n        }\n        return null;\n    }\n\n    const getColor = (bar) => {\n        return getCandidateByName(bar.id).candidate_color\n    }\n\n    if (props.race.state === RaceState.ADDING)\n        return (<div></div>)\n\n    return (\n        <div style={props.style}>\n            <h1> Candidate Rank By Round </h1>\n            <ResponsiveBump\n                data={data}\n                margin={{ top: 40, right: 100, bottom: 40, left: 60 }}\n                colors={getColor}\n                lineWidth={3}\n                activeLineWidth={6}\n                inactiveLineWidth={3}\n                inactiveOpacity={0.15}\n                pointSize={0}\n                activePointSize={0}\n                inactivePointSize={0}\n                pointColor={{ theme: 'background' }}\n                pointBorderWidth={3}\n                activePointBorderWidth={3}\n                pointBorderColor={{ from: 'serie.color' }}\n                axisTop={{\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    legend: '',\n                    legendPosition: 'middle',\n                    legendOffset: -36\n                }}\n                axisRight={null}\n                axisBottom={{\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    legend: '',\n                    legendPosition: 'middle',\n                    legendOffset: 32\n                }}\n                axisLeft={{\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    legend: 'ranking',\n                    legendPosition: 'middle',\n                    legendOffset: -40\n                }}\n            />\n        </div>\n    );\n}\n\nexport default RoundCandidateBump;\n","\nexport class Voter {\n    constructor(voter_id) {\n        this.voter_id = voter_id;\n\n        // Format\n        // {id: Ballot}\n        this.races = {};\n    }\n\n    participating_races = () => {\n        return Object.keys(this.races);\n    }\n\n    participating_in_race = (race_id) => {\n        return race_id in this.races;\n    }\n\n    get_ballot_for_race = (race_id) => {\n        if (race_id in this.races) {\n            if (this.races[race_id].length === 1)\n                return this.races[race_id][0]\n            return this.races[race_id];\n        }\n        return null;\n    }\n\n    add_ballot = (race_id, ballot) => {\n        if (ballot.candidates.length > 0) {\n            if (race_id in this.races) {\n                this.races[race_id] = [...this.races[race_id], ballot]\n            } else {\n                this.races[race_id] = [ballot];\n            }\n        }\n    }\n}","\nexport class Ballot {\n    constructor(ballot_id, candidates) {\n        this.ballot_id = ballot_id;\n        this.candidates = candidates;\n    }\n}","\nexport class Party {\n    constructor(party_name, party_color) {\n        this.party_name = party_name;\n\n        if (!this.isValidColor(party_color)) {\n            party_color = \"#\" + party_color\n            if (!this.isValidColor(party_color)) {\n                console.log(\"Error Color Isn't Valid\", party_color)\n                party_color = \"#FFFFFF\"\n            }\n        }\n        this.party_color = party_color;\n    }\n\n    isValidColor = (color) => {\n        var s = new Option().style;\n        s.color = color;\n        return s.color !== '';\n    }\n}","import React from 'react';\n\nimport { ResponsiveSankey } from '@nivo/sankey'\n\nfunction Sankey(props) {\n\n    const GenerateData = (race) => {\n        const find_candidate_by_id = (candidate_id) => {\n            for (let i = 0; i < race.candidates.length; i++)\n                if (String(race.candidates[i].candidate_id) === candidate_id)\n                    return race.candidates[i];\n            return null;\n        };\n\n        const find_next_active_candidate = (candidates, active_candidates) => {\n            for (const candidate in candidates) {\n                for (const active_candidate in active_candidates) {\n                    if (candidates[candidate].candidate_id === active_candidates[active_candidate].candidate_id) {\n                        return candidates[candidate];\n                    }\n                }\n            }\n            return \"exhausted\";\n        }\n\n        const prev_round = (round) => {\n            return race.rounds[round.round_number - 1];\n        }\n\n        let data = { nodes: [{ id: \"Total Votes\", name: \"Total Votes\", color: \"#000000\" }, { id: \"Elected\", name: \"Elected\", color: \"#01A039\" }, { id: \"Exhausted\", name: \"Exhausted\", color: \"#FF0000\" }], links: [] }\n        for (const round_number in race.rounds) {\n            const round = race.rounds[round_number];\n            for (const candidate of round.start_active_candidates) {\n                data[\"nodes\"].push({ id: candidate.candidate_name + \" \" + round_number, name: candidate.candidate_name, color: candidate.candidate_party.party_color });\n            }\n            if (round.round_number === 0) {\n                // First Round so Count Vote Totals\n                for (const candidate of round.start_active_candidates) {\n                    let link = { source: \"Total Votes\", target: candidate.candidate_name + \" \" + round.round_number, value: round.candidate_real_scores[candidate.candidate_id] };\n                    data['links'].push(link);\n                    if (round.elected_candidates.includes(candidate) && round.round_number !== race.rounds.length - 1) {\n                        let link = { source: candidate.candidate_name + \" \" + round.round_number, target: \"Elected\", value: round.quota, color: \"#01A039\" };\n                        data['links'].push(link);\n                    }\n                }\n            } else {\n                // First add links from prior rounds\n                for (const candidate of round.start_active_candidates) {\n                    let link = { source: candidate.candidate_name + \" \" + (round.round_number - 1), target: candidate.candidate_name + \" \" + round.round_number, value: prev_round(round).candidate_real_scores[candidate.candidate_id] };\n                    data['links'].push(link);\n                    // Check if elected this round and add link if elected\n\n                    if (round.elected_candidates.includes(candidate) && round.round_number !== race.rounds.length - 1) {\n                        let link = { source: candidate.candidate_name + \" \" + round.round_number, target: \"Elected\", value: round.quota, color: \"#01A039\" };\n                        data['links'].push(link);\n                    }\n                }\n\n                // Then add links from eliminated or elected candidates\n                for (const candidate_id in prev_round(round).ballotsToTransfer) {\n                    const candidate = find_candidate_by_id(candidate_id);\n\n                    // Find candidates that it will transfer to\n                    let transfer_candidates_ballot = {};\n\n                    let candidate_ballots = prev_round(round).ballotsToTransfer[candidate_id];\n                    for (const ballot in candidate_ballots) {\n                        const next_candidate = find_next_active_candidate(candidate_ballots[ballot].candidates, round.start_active_candidates);\n                        if (next_candidate !== \"exhausted\") {\n                            if (next_candidate.candidate_id in transfer_candidates_ballot)\n                                transfer_candidates_ballot[next_candidate.candidate_id].push(candidate_ballots[ballot])\n                            else\n                                transfer_candidates_ballot[next_candidate.candidate_id] = [candidate_ballots[ballot]];\n                        } else {\n                            if (next_candidate in transfer_candidates_ballot)\n                                transfer_candidates_ballot[next_candidate].push(candidate_ballots[ballot])\n                            else\n                                transfer_candidates_ballot[next_candidate] = [candidate_ballots[ballot]];\n                        }\n                    }\n\n\n                    for (const transfer_candidate_id in transfer_candidates_ballot) {\n                        if (transfer_candidate_id !== \"exhausted\") {\n                            const transfer_candidate = find_candidate_by_id(transfer_candidate_id);\n\n                            let value = 0;\n                            for (const ballot in transfer_candidates_ballot[transfer_candidate_id]) {\n                                value += round.ballots[transfer_candidates_ballot[transfer_candidate_id][ballot].ballot_id];\n                            }\n                            let link = { source: candidate.candidate_name + \" \" + (round.round_number - 1), target: transfer_candidate.candidate_name + \" \" + round.round_number, value: value };\n                            data['links'].push(link);\n                        }\n                        else {\n                            let value = 0;\n                            for (const ballot in transfer_candidates_ballot[transfer_candidate_id]) {\n                                value += round.ballots[transfer_candidates_ballot[transfer_candidate_id][ballot].ballot_id];\n                            }\n                            let link = { source: candidate.candidate_name + \" \" + (round.round_number - 1), target: \"Exhausted\", value: value };\n                            data['links'].push(link);\n                        }\n                    }\n                }\n            }\n            if (round.round_number === race.rounds.length - 1) {\n                for (const candidate of round.start_active_candidates) {\n                    if (round.elected_candidates.includes(candidate)) {\n                        let link = { source: candidate.candidate_name + \" \" + round.round_number, target: \"Elected\", value: round.candidate_real_scores[candidate.candidate_id] };\n                        data['links'].push(link);\n                    }\n                    else {\n                        let link = { source: candidate.candidate_name + \" \" + round.round_number, target: \"Exhausted\", value: round.candidate_real_scores[candidate.candidate_id] };\n                        data['links'].push(link);\n                    }\n                }\n            }\n        }\n        return data;\n    }\n\n    if (props.race.rounds.length === 0)\n        return (<h1>Loading</h1>)\n\n\n    const data = GenerateData(props.race);\n\n    const getColor = (bar) => {\n        return bar.color\n    }\n\n    return (\n        <div style={props.style}>\n            <ResponsiveSankey\n                data={data}\n                margin={{ top: 100, right: 40, bottom: 100, left: 40 }}\n                layout=\"vertical\"\n                align=\"justify\"\n                sort=\"ascending\"\n                colors={getColor}\n                nodeTooltip={node => <span> {node.name}: {Math.round(node.value)}</span>}\n                nodeOpacity={1}\n                nodeThickness={10}\n                nodeInnerPadding={3}\n                nodeSpacing={10}\n                nodeBorderWidth={0}\n                nodeBorderColor={{ from: 'color', modifiers: [['darker', 0.8]] }}\n                linkOpacity={0.4}\n                linkHoverOpacity={0.8}\n                linkHoverOthersOpacity={0.1}\n                enableLinkGradient={true}\n                enableLabels={true}\n                label={node => `${node.name}`}\n                labelPosition=\"outside\"\n                labelOrientation=\"vertical\"\n                labelPadding={16}\n                labelTextColor={{ from: 'color', modifiers: [['darker', 1]] }}\n                animate={true}\n                motionStiffness={90}\n                motionDamping={15}\n            />\n        </div>\n    );\n}\n\nexport default Sankey;","import React, { useState } from 'react';\n\nimport DropdownButton from 'react-bootstrap/DropdownButton'\nimport { Dropdown } from 'react-bootstrap';\n\nimport { ResponsiveHeatMapCanvas } from '@nivo/heatmap'\n\nfunction HeatMap(props) {\n    const get_ballots_for_candidate_at_position = (candidate, position) => {\n        let ballots = [];\n        for (const ballot of props.race.ballots) {\n            if (ballot.candidates.length > position) {\n                if (ballot.candidates[position].candidate_id === candidate.candidate_id) {\n                    ballots.push(ballot);\n                }\n            }\n        }\n        return ballots;\n    }\n\n    const [showPercent, setShowPercent] = useState(true);\n\n    const [xChoice, setXChoice] = useState(2);\n    const [yChoice, setYChoice] = useState(1);\n\n    let data = [];\n    let keys = []\n\n    for (const candidate of props.race.candidates) {\n        let heatData = { candidate: candidate.candidate_name };\n        let ballots = get_ballots_for_candidate_at_position(candidate, yChoice - 1);\n        for (const other_candidate of props.race.candidates) {\n            let sum = 0;\n            if (ballots.length > 0) {\n                for (const ballot of ballots) {\n                    if (ballot.candidates.length > xChoice - 1)\n                        if (ballot.candidates[xChoice - 1].candidate_id === other_candidate.candidate_id) {\n                            sum += 1;\n                        }\n                }\n            }\n            if (!showPercent)\n                heatData[other_candidate.candidate_name] = sum;\n            else\n                heatData[other_candidate.candidate_name] = Math.round((sum / ballots.length) * 100);\n        }\n        keys.push(candidate.candidate_name);\n        data.push(heatData);\n    }\n\n    let xButtons = props.race.rounds.map((item, index) => {\n        if (item.round_number !== yChoice - 1 || item.round_number !== xChoice - 1)\n            return (<Dropdown.Item key={index} as=\"button\" onClick={() => setXChoice(item.round_number + 1)} > {\"Round \" + (item.round_number + 1)}</Dropdown.Item >);\n        return;\n    });\n\n    let yButtons = props.race.rounds.map((item, index) => {\n        if (item.round_number !== yChoice - 1 || item.round_number !== xChoice - 1)\n            return (<Dropdown.Item key={index} as=\"button\" onClick={() => setYChoice(item.round_number + 1)} > {\"Round \" + (item.round_number + 1)}</Dropdown.Item >);\n        return;\n    });\n\n    return (\n        <div style={{ width: '100%', height: \"100%\" }}>\n            <DropdownButton id=\"dropdown-basic-button\" title={\"Round \" + yChoice}>\n                {yButtons}\n            </DropdownButton>\n            <DropdownButton id=\"dropdown-basic-button\" title={\"Round \" + xChoice}>\n                {xButtons}\n            </DropdownButton>\n\n            <div style={{ width: '100%', height: '100vw' }}>\n                <ResponsiveHeatMapCanvas\n                    data={data}\n                    keys={keys}\n                    indexBy=\"candidate\"\n                    tooltipFormat={\".0%\"}\n                    margin={{ top: 100, right: 60, bottom: 60, left: 60 }}\n                    forceSquare={true}\n                    axisTop={{ orient: 'top', tickSize: 5, tickPadding: 5, tickRotation: -90, legend: '', legendOffset: 36 }}\n                    axisRight={null}\n                    axisBottom={null}\n                    axisLeft={{\n                        orient: 'left',\n                        tickSize: 5,\n                        tickPadding: 5,\n                        tickRotation: 0,\n                        legend: '',\n                        legendPosition: 'middle',\n                        legendOffset: -40\n                    }}\n                    cellOpacity={1}\n                    cellBorderColor={{ from: 'color', modifiers: [['darker', 0.4]] }}\n                    labelTextColor={{ from: 'color', modifiers: [['darker', 1.8]] }}\n                    defs={[\n                        {\n                            id: 'lines',\n                            type: 'patternLines',\n                            background: 'inherit',\n                            color: 'rgba(0, 0, 0, 0.1)',\n                            rotation: -45,\n                            lineWidth: 4,\n                            spacing: 7\n                        }\n                    ]}\n                    fill={[{ id: 'lines' }]}\n                    animate={true}\n                    motionStiffness={80}\n                    motionDamping={9}\n                    hoverTarget=\"cell\"\n                    cellHoverOthersOpacity={0.25}\n                />\n            </div>\n        </div>\n    );\n}\n\nexport default HeatMap;\n","import React, { useState } from 'react';\n\nimport { ResponsiveBarCanvas } from '@nivo/bar';\n\nimport { RaceState } from '../../../Data_Models/Race';\nimport RangeSlider from 'react-bootstrap-range-slider';\n\n\nfunction ElectionBar(props) {\n    const get_round_data = (round, active_candidates) => {\n        let round_data = {};\n        for (let i = 0; i < active_candidates.length; i++) {\n            round_data[active_candidates[i].candidate_id] = { position: i, score: round.candidate_score(active_candidates[i]) }\n        }\n        return round_data;\n    }\n\n    const get_candidate_position = (candidate) => {\n        for (const candidate_table of candidateTable) {\n            if (candidate_table.candidate.candidate_id === candidate.candidate_id) {\n                return candidate_table.position;\n            }\n        }\n        return 0;\n    }\n\n    const get_max_score = () => {\n        let max_score = quota;\n        for (const candidate_table of candidateTable) {\n            max_score = Math.max(candidate_table.score, max_score);\n        }\n        return max_score\n    }\n\n    const get_candidate_by_position = (position) => {\n        for (const candidate of props.race.candidates) {\n            if (get_candidate_position(candidate) === position) {\n                return candidate;\n            }\n        }\n        return 0;\n    }\n\n    const final_candidate_score = (candidate) => {\n        for (const candidate_table of candidateTable) {\n            if (candidate_table.candidate.candidate_id === candidate.candidate_id) {\n                return candidate_table.score;\n            }\n        }\n        return 0;\n    }\n\n    const [round, setRound] = useState(1);\n    const candidateTable = props.race.candidateTable();\n\n    if (props.race.rounds === 0 || props.race.state === RaceState.ADDING)\n        return <h1> Loading... </h1>\n\n    let quota = props.race.quota();\n\n    let data_active_candidates = [];\n    // Get Candidates to Display\n    let round_active_candidates = props.race.rounds[round - 1].active_candidates;\n    for (let i = 0; i < round; i++) {\n        data_active_candidates.push(get_round_data(props.race.rounds[i],\n            round_active_candidates));\n    }\n\n    let keys = [\"elected\", \"transferred\"]\n    let chart_data = [];\n\n    for (let i = 0; i < props.race.rounds[round - 1].candidates.length; i++) {\n        const candidate = get_candidate_by_position(i);\n        if (round_active_candidates.includes(candidate)) {\n            let data = { candidate: candidate.candidate_name };\n            for (let i = 0; i < round; i++) {\n                let score = data_active_candidates[i][candidate.candidate_id].score;\n                if (i !== 0) {\n                    score -= data_active_candidates[i - 1][candidate.candidate_id].score;\n                }\n                data[\"Round \" + (i + 1)] = score;\n                if (!keys.includes(\"Round \" + (i + 1))) {\n                    keys.push(\"Round \" + (i + 1));\n                }\n            }\n            chart_data.push(data);\n        } else if (props.race.rounds[round - 1].elected_candidates.includes(candidate)) {\n            chart_data.push({ candidate: candidate.candidate_name, elected: props.race.rounds[round - 1].candidate_real_scores[candidate.candidate_id] });\n        } else {\n            chart_data.push({ candidate: candidate.candidate_name, transferred: final_candidate_score(candidate) });\n        }\n    }\n    return (\n        <div style={{ width: '100%', height: '50vw' }}>\n            <div style={{ width: '80%' }}>\n                <label style={{ font: '1.3rem/1 arial, sans-serif', color: 'black', textAlign: 'center', padding: '5% 0 0 0' }}>\n                    Round\n                </label>\n                <div style={{ margin: '0% 5% 0% 5%' }}>\n                    <RangeSlider\n                        min={1}\n                        max={props.race.rounds.length}\n                        step={1}\n                        value={round}\n                        variant=\"secondary\"\n                        onChange={changeEvent => setRound(changeEvent.target.value)}\n                    />\n                </div>\n            </div>\n            <div style={{ width: '100%', height: '50vw' }}>\n                <ResponsiveBarCanvas\n                    data={chart_data}\n                    keys={keys}\n                    indexBy=\"candidate\"\n                    margin={{ top: 40, right: 40, bottom: 200, left: 60 }}\n                    maxValue={get_max_score()}\n                    pixelRatio={2}\n                    padding={0.05}\n                    innerPadding={0}\n                    groupMode=\"stacked\"\n                    layout=\"vertical\"\n                    reverse={false}\n                    colors={{ scheme: 'nivo' }}\n                    colorBy=\"id\"\n                    borderWidth={0}\n                    borderColor={{ from: 'color', modifiers: [['darker', 1.6]] }}\n                    axisBottom={{\n                        tickSize: 5,\n                        tickPadding: 5,\n                        tickRotation: -60,\n                    }}\n                    axisLeft={{\n                        tickSize: 5,\n                        tickPadding: 5,\n                        tickRotation: 0,\n                        legend: 'Score',\n                        legendPosition: 'middle',\n                        legendOffset: -40\n                    }}\n                    enableGridX={false}\n                    enableGridY={true}\n                    enableLabel={false}\n                    labelSkipWidth={12}\n                    labelSkipHeight={12}\n                    labelTextColor={{ from: 'color', modifiers: [['darker', 1.6]] }}\n                    isInteractive={true}\n                />\n            </div>\n        </div>\n    );\n}\n\nexport default ElectionBar;\n","import React, { useState } from 'react';\n\nimport DropdownButton from 'react-bootstrap/DropdownButton'\nimport { Dropdown } from 'react-bootstrap';\n\nimport { ResponsiveChordCanvas } from '@nivo/chord'\n\nfunction Chord(props) {\n    const get_ballots_for_candidate_at_position = (candidate, position) => {\n        let ballots = [];\n        for (const ballot of props.race.ballots) {\n            if (ballot.candidates.length > position) {\n                if (ballot.candidates[position].candidate_id === candidate.candidate_id) {\n                    ballots.push(ballot);\n                }\n            }\n        }\n        return ballots;\n    }\n\n    const [xChoice, setXChoice] = useState(2);\n    const [yChoice, setYChoice] = useState(1);\n\n    let data = [];\n    let keys = []\n\n    for (const candidate of props.race.candidates) {\n        let chordData = [];\n        let ballots = get_ballots_for_candidate_at_position(candidate, yChoice - 1);\n        for (const other_candidate of props.race.candidates) {\n            let sum = 0;\n            if (ballots.length > 0) {\n                for (const ballot of ballots) {\n                    if (ballot.candidates.length > xChoice - 1)\n                        if (ballot.candidates[xChoice - 1].candidate_id === other_candidate.candidate_id) {\n                            sum += 1;\n                        }\n                }\n            }\n            chordData.push(sum);\n        }\n        keys.push(candidate.candidate_name);\n        data.push(chordData);\n    }\n\n    let xButtons = props.race.rounds.map((item, index) => {\n        if (item.round_number !== yChoice - 1 || item.round_number !== xChoice - 1)\n            return (<Dropdown.Item key={index} as=\"button\" onClick={() => setXChoice(item.round_number + 1)} > {\"Round \" + (item.round_number + 1)}</Dropdown.Item >);\n        return;\n    });\n\n    let yButtons = props.race.rounds.map((item, index) => {\n        if (item.round_number !== yChoice - 1 || item.round_number !== xChoice - 1)\n            return (<Dropdown.Item key={index} as=\"button\" onClick={() => setYChoice(item.round_number + 1)} > {\"Round \" + (item.round_number + 1)}</Dropdown.Item >);\n        return;\n    });\n\n    return (\n        <div style={{ width: '100%', height: \"100%\" }}>\n            <div>\n                <DropdownButton id=\"dropdown-basic-button\" title={\"Round \" + yChoice}>\n                    {yButtons}\n                </DropdownButton>\n\n                <DropdownButton id=\"dropdown-basic-button\" title={\"Round \" + xChoice}>\n                    {xButtons}\n                </DropdownButton>\n            </div>\n\n            <div style={{ width: '100%', height: '100vw' }}>\n                <ResponsiveChordCanvas\n                    matrix={data}\n                    keys={keys}\n                    margin={{ top: 60, right: 200, bottom: 60, left: 60 }}\n                    valueFormat=\".2f\"\n                    pixelRatio={2}\n                    padAngle={0.006}\n                    innerRadiusRatio={0.86}\n                    innerRadiusOffset={0}\n                    arcOpacity={1}\n                    arcBorderWidth={1}\n                    arcBorderColor={{ from: 'color', modifiers: [['darker', 0.4]] }}\n                    ribbonOpacity={0.5}\n                    ribbonBorderWidth={0}\n                    ribbonBorderColor={{ from: 'color', modifiers: [['darker', 0.4]] }}\n                    enableLabel={true}\n                    label=\"id\"\n                    labelOffset={9}\n                    labelRotation={-90}\n                    labelTextColor={{ from: 'color', modifiers: [['darker', 1]] }}\n                    colors={{ scheme: 'category10' }}\n                    isInteractive={true}\n                    arcHoverOpacity={1}\n                    arcHoverOthersOpacity={0.4}\n                    ribbonHoverOpacity={0.75}\n                    ribbonHoverOthersOpacity={0.15}\n                    legends={[\n                        {\n                            anchor: 'right',\n                            direction: 'column',\n                            justify: false,\n                            translateX: 120,\n                            translateY: 0,\n                            itemWidth: 80,\n                            itemHeight: 11,\n                            itemsSpacing: 0,\n                            itemTextColor: '#999',\n                            itemDirection: 'left-to-right',\n                            symbolSize: 12,\n                            effects: [\n                                {\n                                    on: 'hover',\n                                    style: {\n                                        itemTextColor: '#000'\n                                    }\n                                }\n                            ]\n                        }\n                    ]}\n                />\n            </div>\n        </div>\n    );\n}\n\nexport default Chord;\n","import React, { useState, useEffect } from 'react';\nimport firebase from 'firebase';\nimport uuid from 'react-uuid'\n\nimport DropdownButton from 'react-bootstrap/DropdownButton'\nimport { Dropdown } from 'react-bootstrap';\nimport Button from 'react-bootstrap/Button'\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\nimport 'react-bootstrap-range-slider/dist/react-bootstrap-range-slider.css';\nimport RangeSlider from 'react-bootstrap-range-slider';\n\nimport useInterval from '../Hooks/useInterval';\nimport CandidateList from './Race/CandidateList';\n\nimport ElectionSettings from './Settings';\n\nimport CustomFirstPie from './CustomFirstPie'\n\nimport FirstChoicePie from './Models/FirstChoicePie';\nimport ElectedCandidatesPie from './Models/ElectedCandidatesPie';\nimport CandidatesRankedPie from './Models/CandidatesRankedPie';\nimport CandidatesRanked from './Models/CandidatesRanked';\nimport PartyPercentage from './Models/PartyPercentage';\nimport EventualWinner from './Models/EventualWinner';\nimport VoteOverTime from './Models/VoteOverTime';\nimport VoteOverTimeBump from './Models/VoteOverTimeBump';\nimport RoundCandidateBump from './Models/RoundCandidateBump';\n\nimport { Race, RaceState } from '../../Data_Models/Race';\nimport { Voter } from '../../Data_Models/Voter';\nimport { Ballot } from '../../Data_Models/Ballot';\nimport { Party } from '../../Data_Models/Party';\nimport { Candidate } from '../../Data_Models/Candidate';\n\nimport './ElectionPage.css'\nimport { RoundState } from '../../Data_Models/Round';\nimport NivoSankey from './Models/Sankey';\nimport HeatMap from './Models/HeatMap';\nimport ElectionBar from './Models/ElectionBar';\nimport Chord from './Models/Chord';\n\nfunction ElectionPage(props) {\n\n    // Helper Functions\n    const shadeColor = (color, percent) => {\n\n        var R = parseInt(color.substring(1, 3), 16);\n        var G = parseInt(color.substring(3, 5), 16);\n        var B = parseInt(color.substring(5, 7), 16);\n\n        R = parseInt(R * (100 + percent) / 100);\n        G = parseInt(G * (100 + percent) / 100);\n        B = parseInt(B * (100 + percent) / 100);\n\n        R = (R < 255) ? R : 255;\n        G = (G < 255) ? G : 255;\n        B = (B < 255) ? B : 255;\n\n        var RR = ((R.toString(16).length === 1) ? \"0\" + R.toString(16) : R.toString(16));\n        var GG = ((G.toString(16).length === 1) ? \"0\" + G.toString(16) : G.toString(16));\n        var BB = ((B.toString(16).length === 1) ? \"0\" + B.toString(16) : B.toString(16));\n\n        return \"#\" + RR + GG + BB;\n    }\n\n    const find_race_by_id = (id) => {\n        for (let i = 0; i < races.length; i++) {\n            if (String(races[i].race_id) === id)\n                return races[i];\n        }\n        return null;\n    };\n\n    const find_race_by_name = (name) => {\n        for (let i = 0; i < races.length; i++) {\n            if (races[i].race_name === name)\n                return races[i];\n        }\n        return null;\n    };\n\n    const find_candidate_by_id = (race_id, candidate_id) => {\n        let race = find_race_by_id(race_id);\n        if (race !== null)\n            for (let i = 0; i < race.candidates.length; i++)\n                if (String(race.candidates[i].candidate_id) === candidate_id)\n                    return race.candidates[i];\n        return null;\n    };\n\n    const find_party_by_name = (name) => {\n        for (let i = 0; i < parties.length; i++)\n            if (parties[i].party_name === name)\n                return parties[i];\n        return null\n    };\n\n    const loadParties = (party_data) => {\n        let partiesToAdd = []\n        for (const party of party_data.parties) {\n            for (let i = 0; i < partiesToAdd.length; i++)\n                if (partiesToAdd.party_name === party.party_name)\n                    continue;\n            partiesToAdd.push(new Party(party.party_name, party.party_color));\n        }\n        return partiesToAdd;\n    }\n\n    const loadRaces = (election_configuration) => {\n        let racesToAdd = []\n        for (const race of election_configuration.races) {\n            for (let i = 0; i < racesToAdd.length; i++)\n                if (racesToAdd.race_id === race.race_id)\n                    continue;\n\n            racesToAdd.push(new Race(race.race_id, race.race_position, race.race_max_winners));\n        }\n        return racesToAdd;\n    }\n\n    const loadCandidates = (candidate_data) => {\n        for (let key in candidate_data) {\n            const race = find_race_by_name(key);\n            let candidate_colors = {};\n            if (race === null)\n                continue;\n            for (const candidate of candidate_data[key]) {\n                let party = find_party_by_name(candidate.party);\n                if (party === null) {\n                    party = new Party(candidate.party, \"FFFFFF\");\n                    console.log(\"Adding Party: \", party.party_name);\n                    setParties([...parties, party]);\n                }\n                let color = shadeColor(party.party_color, Math.floor(Math.random() * 100) - 50);\n\n                if (party.party_name in candidate_colors) {\n                    while (candidate_colors[party.party_name].includes(color))\n                        color = shadeColor(party.party_color, Math.floor(Math.random() * 100) - 50);\n                    candidate_colors[party.party_name].push(color);\n                }\n                else\n                    candidate_colors[party.party_name] = [color]\n                race.add_candidate(new Candidate(candidate.number, candidate.name, party, color));\n            }\n        }\n        setCandidatesLoaded(true);\n\n        return;\n    }\n\n    const loadVoters = (ballot_data) => {\n        let voters = []\n        for (const item of ballot_data.ballots) {\n            let voter = new Voter(uuid())\n            for (let key in item) {\n                let candidateOrder = []\n                for (let candidate_id of item[key]) {\n                    let candidate = find_candidate_by_id(key, candidate_id);\n                    candidateOrder.push(candidate);\n                };\n\n                const ballot = new Ballot(uuid(), candidateOrder);\n                const race = find_race_by_id(key);\n                if (race !== null) {\n                    race.add_ballot(ballot);\n                }\n                voter.add_ballot(key, ballot);\n            }\n            voters.push(voter);\n        }\n        return voters;\n    }\n\n    const excused_changed = (candidate) => {\n        if (candidates_dropped.includes(candidate)) {\n            setCandidatesDropped(candidates_dropped.filter((value) => {\n                return value !== candidate\n            }));\n        } else {\n            setCandidatesDropped([candidate, ...candidates_dropped])\n        }\n    }\n\n    const [election_configuration, setElectionConfiguration] = useState([]);\n    const [candidate_data, setCandidateData] = useState([]);\n    const [party_data, setPartyData] = useState([]);\n    const [ballot_data, setBallotData] = useState([]);\n\n    const [candidates_dropped, setCandidatesDropped] = useState([]);\n\n    const [isLoading, setIsLoading] = useState(true);\n\n    const [partiesLoaded, setPartiesLoaded] = useState(false);\n    const [racesLoaded, setRacesLoaded] = useState(false);\n    const [candidatesLoaded, setCandidatesLoaded] = useState(false);\n    const [votersLoaded, setVotersLoaded] = useState(false);\n\n    const [parties, setParties] = useState([]);\n    const [races, setRaces] = useState([]);\n    const [voters, setVoters] = useState([]);\n\n    const [activeRace, setActiveRace] = useState(null);\n    const [speed, setSpeed] = useState(1000);\n    const [refresh, setRefresh] = useState(false);\n    const [isRunning, setIsRunning] = useState(false);\n    const [page, setPage] = useState(0);\n\n    const [model, setModel] = useState(0);\n\n    useEffect(() => {\n        if (!isLoading)\n            setPartiesLoaded(true);\n    }, [parties]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    useEffect(() => {\n        if (!isLoading) {\n            if (activeRace === null)\n                setActiveRace(races[0]);\n            setRacesLoaded(true);\n        }\n    }, [races]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    useEffect(() => {\n        if (!isLoading)\n            setVotersLoaded(true);\n    }, [voters]);  // eslint-disable-line react-hooks/exhaustive-deps\n\n    useEffect(() => {\n        for (const race of races) {\n            if (race.state !== RaceState.ADDING)\n                continue;\n            for (const candidate of race.inactive_candidates) {\n                race.unexcuse_candidate(candidate);\n            }\n            for (const candidate of candidates_dropped) {\n                if (find_candidate_by_id(race.race_id, candidate.candidate_id) !== null)\n                    race.excuse_candidate(candidate);\n            }\n        }\n        setRefresh(!refresh)\n    }, [candidates_dropped, races]);\n\n    useEffect(() => {\n        const loadData = async () => {\n            if (props.data !== undefined && props.data !== null) {\n                setElectionConfiguration(props.data.election_configuration);\n                setCandidateData(props.data.candidate_data);\n                setPartyData(props.data.parties_data);\n                setBallotData(props.data.ballot_data);\n                setIsLoading(false);\n                return;\n            }\n            let electionId = props.match.params.electionId;\n\n            if (typeof (electionId) === \"undefined\") {\n                electionId = \"uc_berkeley\";\n            }\n\n            let yearId = props.match.params.yearId;\n            if (typeof (yearId) === \"undefined\") {\n                yearId = \"2015\";\n            }\n\n            let databaseString = 'elections/' + electionId + \"/\" + yearId;\n\n            console.log(\"Loading Data From DataBase\");\n            await firebase.database().ref(databaseString).once('value', snapshot => {\n                if (!snapshot.exists()) {\n                    console.log(\"Path Doesn't Exist, Loading Default Reference\");\n                    databaseString = 'elections/uc_berkeley/2015';\n                }\n            });\n\n            firebase.database().ref(databaseString).once('value', snapshot => {\n                setElectionConfiguration(snapshot.child('election_configuration').val());\n                setCandidateData(snapshot.child('candidate_data').val());\n                setPartyData(snapshot.child('parties_data').val());\n                setBallotData(snapshot.child('ballot_data').val());\n                setIsLoading(false);\n            });\n        }\n\n        if (isLoading) {\n            loadData();\n            return;\n        }\n        if (!partiesLoaded) {\n            console.log(\"Loading Parties\")\n            let parties = loadParties(party_data);\n            setParties(parties);\n        }\n\n        if (partiesLoaded && !racesLoaded) {\n            console.log(\"Loading Races\");\n            setRaces(loadRaces(election_configuration));\n            return;\n        }\n\n        if (racesLoaded && !candidatesLoaded) {\n            console.log(\"Loading Candidates\");\n            loadCandidates(candidate_data);\n            return;\n        }\n\n        if (candidatesLoaded && !votersLoaded) {\n            console.log(\"Loading Voters\");\n            setVoters(loadVoters(ballot_data));\n        }\n        if (votersLoaded) {\n            console.log(\"Finished Loading\");\n        }\n\n    }, [isLoading, partiesLoaded, racesLoaded, candidatesLoaded, votersLoaded]);  // eslint-disable-line react-hooks/exhaustive-deps\n\n    useInterval(() => {\n        if (activeRace.state !== RoundState.COMPLETE && isRunning) {\n            for (let i = 0; i < Math.floor(speed / 10); i++) {\n                activeRace.run_race_step();\n            }\n            setRefresh(!refresh);\n        } else {\n            setIsRunning(false)\n        }\n    }, isRunning ? 100 : null)\n\n    const switchActiveRace = (race) => {\n        setIsRunning(false);\n        setActiveRace(race);\n    }\n\n    const finishRaces = () => {\n        for (const race of races) {\n            while (race.state !== RoundState.COMPLETE) {\n                race.run_race_step();\n            }\n        }\n        setRefresh(!refresh);\n    }\n\n    const stopRunning = (race) => {\n        setIsRunning(false);\n    }\n\n\n    // Render Everything\n    if (isLoading || activeRace == null)\n        return <h1> Loading... </h1>\n\n    const pageButtonStyle = { borderRadius: 0, height: \"100%\", width: '50%' };\n    let pageButtons = (\n        <ButtonGroup size=\"lg\" style={{ width: \"100%\", height: \"50\", padding: 0, margin: 0 }}>\n            <Button onClick={() => setPage(0)} disabled={page === 0} variant=\"secondary\" size=\"lg\" style={pageButtonStyle}>\n                {'Election'}\n            </Button>\n            <Button onClick={() => setPage(1)} disabled={page === 1} variant=\"secondary\" size=\"lg\" style={pageButtonStyle}>\n                {'Charts'}\n            </Button>\n            <Button onClick={() => setPage(2)} disabled={page === 2} variant=\"secondary\" size=\"lg\" style={pageButtonStyle}>\n                {'Models'}\n            </Button>\n            <Button onClick={() => setPage(4)} disabled={page === 3} variant=\"secondary\" size=\"lg\" style={pageButtonStyle}>\n                {'Custom Graph'}\n            </Button>\n            <Button onClick={() => setPage(3)} disabled={page === 3} variant=\"secondary\" size=\"lg\" style={pageButtonStyle}>\n                {'Settings'}\n            </Button>\n        </ButtonGroup>\n    );\n\n    let raceTitle = (\n        <div className=\"title-text\" style={{ width: '100%', backgroundColor: 'grey', margin: '1% 2.5% 1% 2.5%', borderRadius: '5px' }}>\n            <h1 style={{ font: '3.5rem/1 arial, sans-serif', color: 'white', textAlign: 'center', padding: '1%' }}> {activeRace.race_name} </h1>\n        </div>\n    );\n\n    if (page === 0) {\n\n        let dropdownItems = races.map((item, index) => (\n            <Dropdown.Item key={index} as=\"button\" onClick={() => switchActiveRace(item)} > {item.race_name}</Dropdown.Item >\n        ));\n\n        return (\n            <div className=\"text-center\" style={{ display: \"flex\", justifyContent: 'center', flexWrap: 'wrap' }}>\n                {pageButtons}\n                {raceTitle}\n                <div className=\"election-table\" style={{ width: '100%' }}>\n                    <CandidateList candidates={activeRace.candidateTable} seats={activeRace.seats} refresh={refresh} />\n                </div>\n                <ButtonGroup size=\"lg\" style={{ borderRadius: '5px', width: '100%', margin: '0% 2.5% 0% 2.5%' }}>\n                    <DropdownButton id=\"dropdown-item-button\" as={ButtonGroup} title=\"Change Race\" variant=\"primary\" size=\"lg\" style={{ boxShadow: '0 0 0 1px black', borderRadius: '5px 0px 0px 5px' }}>\n                        {dropdownItems}\n                    </DropdownButton>\n                    <Button onClick={() => setIsRunning(true)} disabled={isRunning} variant=\"primary\" style={{ boxShadow: '0 0 0 1px black', width: '5%' }}>\n                        {'Run Election'}\n                    </Button>\n                    <Button onClick={finishRaces} disabled={false} variant=\"primary\" style={{ boxShadow: '0 0 0 1px black', width: '5%' }}>\n                        {'Finish Races'}\n                    </Button>\n                    <div style={{ boxShadow: '0 0 0 1px black', backgroundColor: '#007bff', width: '30%', borderRadius: '0px 5px 5px 0px' }}>\n                        <label style={{ font: '1.3rem/1 arial, sans-serif', color: 'white', textAlign: 'center', padding: '5% 0 0 0' }}>\n                            Speed\n                        </label>\n                        <div style={{ margin: '0% 5% 0% 5%' }}>\n                            <RangeSlider\n                                min={0}\n                                max={10000}\n                                step={10}\n                                value={speed}\n                                variant=\"secondary\"\n                                onChange={changeEvent => setSpeed(changeEvent.target.value)}\n                            />\n                        </div>\n                    </div>\n                </ButtonGroup>\n            </div >\n        );\n    } else if (page === 1) {\n        let chartStyle = {\n            alignSelf: 'center', width: '50%', height: '30vw', margin: '0 0% 5% 0'\n        }\n        return (\n            <div className=\"text-center\" style={{ display: \"flex\", justifyContent: 'center', flexWrap: 'wrap', width: '100%' }}>\n                {pageButtons}\n                {raceTitle}\n                <FirstChoicePie race={activeRace} parties={parties} style={chartStyle} />\n                <ElectedCandidatesPie race={activeRace} parties={parties} style={chartStyle} />\n                <CandidatesRanked race={activeRace} parties={parties} style={chartStyle} />\n                <CandidatesRankedPie race={activeRace} style={chartStyle} />\n                <PartyPercentage race={activeRace} parties={parties} style={chartStyle} />\n                <VoteOverTime race={activeRace} parties={parties} style={chartStyle} />\n                <VoteOverTimeBump race={activeRace} style={chartStyle} />\n                <EventualWinner race={activeRace} style={chartStyle} />\n                <RoundCandidateBump race={activeRace} style={chartStyle} />\n            </div >\n        );\n    } else if (page === 2) {\n        let modelButtons = (\n            <ButtonGroup size=\"lg\" style={{ width: \"100%\", height: \"50\", padding: 0, margin: 0 }}>\n                <Button onClick={() => setModel(0)} disabled={model === 0} variant=\"secondary\" size=\"lg\" style={pageButtonStyle}>\n                    {'Bar'}\n                </Button>\n                <Button onClick={() => setModel(1)} disabled={model === 1} variant=\"secondary\" size=\"lg\" style={pageButtonStyle}>\n                    {'Heat Map'}\n                </Button>\n                <Button onClick={() => setModel(2)} disabled={model === 2} variant=\"secondary\" size=\"lg\" style={pageButtonStyle}>\n                    {'Sankey'}\n                </Button>\n            </ButtonGroup>\n        );\n        if (model === 0) {\n            return (\n                <div className=\"text-center\" style={{\n                    display: \"flex\",\n                    justifyContent: 'center',\n                    flexWrap: 'wrap'\n                }}>\n                    {pageButtons}\n                    {modelButtons}\n                    {raceTitle}\n                    <div style={{ display: \"flex\", flexWrap: 'wrap', justifyContent: 'center', alignItems: 'center', width: '100%' }}>\n                        <ElectionBar race={activeRace} style={{ alignSelf: 'center', width: '40vw' }} />\n                    </div>\n                </div>\n            );\n        }\n        else if (model === 1) {\n            return (\n                <div className=\"text-center\" style={{\n                    height: '100%',\n                    minHeight: '100%',\n                    display: \"flex\",\n                    justifyContent: 'center',\n                    flexWrap: 'wrap'\n                }}>\n                    {pageButtons}\n                    {modelButtons}\n                    {raceTitle}\n                    <HeatMap race={activeRace} />\n                    <Chord race={activeRace} />\n                </div >\n            );\n        }\n        else {\n            return (\n                <div className=\"text-center\" style={{\n                    height: '100%',\n                    minHeight: '100%',\n                    display: \"flex\",\n                    justifyContent: 'center',\n                    flexWrap: 'wrap'\n                }}>\n                    {pageButtons}\n                    {modelButtons}\n                    {raceTitle}\n                    <NivoSankey race={activeRace} style={{\n                        width: '90%',\n                        height: '60vw'\n                    }}\n                    />\n                </div >\n            );\n        }\n    } else if (page == 3) {\n        return (\n            <div className=\"text-center\" style={{\n                height: '100%',\n                minHeight: '100%',\n                display: \"flex\",\n                justifyContent: 'center',\n                flexWrap: 'wrap'\n            }}>\n                { pageButtons}\n                { raceTitle}\n                <ElectionSettings race={activeRace} excused={excused_changed} running={stopRunning} refresh={refresh} />\n            </div>\n        );\n    } else {\n        return (\n            <div className=\"text-center\" style={{\n                height: '100%',\n                minHeight: '100%',\n                display: \"flex\",\n                justifyContent: 'center',\n                flexWrap: 'wrap'\n            }}>\n                { pageButtons}\n                { raceTitle}\n                <CustomFirstPie race={activeRace} />\n            </div>\n        )\n    }\n}\n\nexport default ElectionPage;","import React, { Component } from 'react';\n\n\nexport class FourZeroFour extends Component {\n\n    render() {\n        return (\n            <div>\n                <h1>404: Oops! Page not found!</h1>\n            </div>)\n    }\n}\nexport default FourZeroFour;\n","import React, { useState } from 'react';\nimport firebase from 'firebase';\nimport Button from 'react-bootstrap/Button'\n\nimport { Form } from 'react-bootstrap';\n\nfunction AddToDatabase() {\n    const AddToDB = (event) => {\n        const checkStrings = (str) => {\n            return str === null || str.match(/^ *$/) !== null;\n        }\n        event.preventDefault();\n        let data = ({ election_configuration: election_configuration, candidate_data: candidate_data, ballot_data: ballot_data, parties_data: party_data });\n        if (!checkStrings(electionName) && !checkStrings(year)) {\n            firebase.database().ref(\"elections/\" + electionName + \"/\" + year).set(data);\n            alert(\"Added To Database: elections/\" + electionName + \"/\" + year);\n        }\n        else {\n            alert('Invalid Name');\n        }\n    }\n\n    const onChange = async (event, callback) => {\n        event.preventDefault()\n        const reader = new FileReader()\n        reader.onload = async (event) => {\n            callback(JSON.parse(event.target.result));\n        };\n        if (event.target.files[0] !== null)\n            reader.readAsText(event.target.files[0]);\n    }\n\n    const [electionName, setElectionName] = useState(\"\");\n    const [year, setYear] = useState(\"\");\n    const [election_configuration, setElectionConfiguration] = useState(null);\n    const [party_data, setPartyData] = useState(null);\n    const [candidate_data, setCandidateData] = useState(null);\n    const [ballot_data, setBallotData] = useState(null);\n\n    return (\n        <div className=\"text-center\">\n            <h1> Add to Database </h1>\n            <Form onSubmit={AddToDB}>\n                <Form.Group>\n                    <Form.Control type=\"text\" value={electionName} onChange={(event) => setElectionName(event.target.value)} placeholder=\"Election Name\" />\n                    <Form.Control type=\"text\" value={year} onChange={(event) => setYear(event.target.value)} placeholder=\"Year\" />\n                </Form.Group>\n                <Form.Group style={{ display: 'grid', justifyItems: 'center' }}>\n                    <Form.File onChange={(event) => onChange(event, setElectionConfiguration)} accept='.json' label=\"Election Configuration\" style={{ backgroundColor: 'grey', margin: '5px' }} />\n                    <Form.File onChange={(event) => onChange(event, setPartyData)} label=\"Party Data\" style={{ backgroundColor: 'grey', margin: '5px' }} />\n                    <Form.File onChange={(event) => onChange(event, setCandidateData)} label=\"Candidate Data\" style={{ backgroundColor: 'grey', margin: '5px' }} />\n                    <Form.File onChange={(event) => onChange(event, setBallotData)} label=\"Ballot Data\" style={{ backgroundColor: 'grey', margin: '5px' }} />\n                </Form.Group>\n                <Form.Group>\n                    <Button variant=\"primary\" type=\"submit\">\n                        Submit\n                    </Button>\n                </Form.Group>\n            </Form>\n        </div >\n    );\n}\n\nexport default AddToDatabase;\n","import React, { Fragment } from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport { Redirect, withRouter } from \"react-router\";\nimport './firebase';\nimport './App.css'\n\nimport NavBar from './Components/NavBar/NavBar';\nimport Home from './Components/Home';\nimport ElectionPage from './Components/ElectionPage/ElectionPage';\nimport FourZeroFour from './Components/FourZeroFour';\nimport AddToDatabase from './Components/AddToDatabase';\n\nimport election_configuration from './Data/Configuration.json';\nimport candidate_data from './Data/Candidates.json';\nimport parties_data from './Data/Parties.json';\nimport ballot_data from './Data/Ballots.json';\n\nconst NavBarWithRouter = withRouter(NavBar);\n\nfunction App() {\n    return (\n        <BrowserRouter basename='/stvote' style={{ width: '100%', height: '100%' }}>\n            <Fragment >\n                <NavBarWithRouter style={{ width: '100%', height: '100%' }} />\n                <main style={{ width: '100%', height: '100%' }}>\n                    <Switch>\n                        <Route exact path='/'> <Redirect to=\"/home\" /> </Route>\n                        <Route path='/home' component={Home} />\n                        <Route exact path='/election' render={() => (<ElectionPage data={{ election_configuration: election_configuration, candidate_data: candidate_data, parties_data: parties_data, ballot_data: ballot_data }} />)} />\n                        <Route exact path='/election/:electionId' component={ElectionPage} />\n                        <Route path='/election/:electionId/:yearId' component={ElectionPage} />\n                        <Route path='/add' component={AddToDatabase} />\n                        <Route component={FourZeroFour} />\n                    </Switch>\n                </main>\n            </Fragment>\n        </BrowserRouter>\n    );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import 'bootstrap/dist/css/bootstrap.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App style={{ width: '100%', height: '100%' }} />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}